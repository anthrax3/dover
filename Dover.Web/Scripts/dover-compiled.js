var CKFinder=function(basePath,width,height,selectFunction){this.BasePath=basePath||CKFinder.DEFAULT_BASEPATH;this.Width=width||"100%";this.Height=height||400;this.SelectFunction=selectFunction||null;this.SelectFunctionData=null;this.SelectThumbnailFunction=selectFunction||null;this.SelectThumbnailFunctionData=null;this.DisableThumbnailSelection=false;this.ClassName=null||"CKFinderFrame";this.StartupPath=null;this.ResourceType=null;this.StartupFolderExpanded=false;this.RememberLastFolder=true;this.Id=
null;this.ConnectorLanguage="aspx"};CKFinder.DEFAULT_BASEPATH="/ckfinder/";
CKFinder.prototype={Create:function(){document.write(this.CreateHtml())},CreateHtml:function(){var className=this.ClassName;if(className&&className.length>0)className=' class="'+className+'"';var id=this.Id;if(id&&id.length>0)id=' id="'+id+'"';return'<iframe src="'+this._BuildUrl()+'" width="'+this.Width+'" '+'height="'+this.Height+'"'+className+id+' frameborder="0" scrolling="no"></iframe>'},Popup:function(width,height){width=width||"80%";height=height||"70%";if(typeof width=="string"&&width.length>
1&&width.substr(width.length-1,1)=="%")width=parseInt(window.screen.width*parseInt(width)/100);if(typeof height=="string"&&height.length>1&&height.substr(height.length-1,1)=="%")height=parseInt(window.screen.height*parseInt(height)/100);if(width<200)width=200;if(height<200)height=200;var top=parseInt((window.screen.height-height)/2);var left=parseInt((window.screen.width-width)/2);var options="location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes"+
",width="+width+",height="+height+",top="+top+",left="+left;var popupWindow=window.open("","CKFinderPopup",options,true);if(!popupWindow)return false;var url=this._BuildUrl().replace(/&amp;/g,"&");try{popupWindow.moveTo(left,top);popupWindow.resizeTo(width,height);popupWindow.focus();popupWindow.location.href=url}catch(e){popupWindow=window.open(url,"CKFinderPopup",options,true)}return true},_BuildUrl:function(url){var url=url||this.BasePath;var qs="";if(!url||url.length==0)url=CKFinder.DEFAULT_BASEPATH;
if(url.substr(url.length-1,1)!="/")url=url+"/";url+="ckfinder.html";if(this.SelectFunction){var functionName=this.SelectFunction;if(typeof functionName=="function")functionName=functionName.toString().match(/function ([^(]+)/)[1];qs+="?action=js&amp;func="+functionName}if(this.SelectFunctionData){qs+=qs?"&amp;":"?";qs+="data="+encodeURIComponent(this.SelectFunctionData)}if(this.ResourceType){qs+=qs?"&amp;":"?";qs+="type="+encodeURIComponent(this.ResourceType)}if(this.DisableThumbnailSelection){qs+=
qs?"&amp;":"?";qs+="dts=1"}else if(this.SelectThumbnailFunction||this.SelectFunction){var functionName=this.SelectThumbnailFunction||this.SelectFunction;if(typeof functionName=="function")functionName=functionName.toString().match(/function ([^(]+)/)[1];qs+=qs?"&amp;":"?";qs+="thumbFunc="+functionName;if(this.SelectThumbnailFunctionData)qs+="&amp;tdata="+encodeURIComponent(this.SelectThumbnailFunctionData);else if(!this.SelectThumbnailFunction&&this.SelectFunctionData)qs+="&amp;tdata="+encodeURIComponent(this.SelectFunctionData)}if(this.StartupPath){qs+=
qs?"&amp;":"?";qs+="start="+encodeURIComponent(this.StartupPath+(this.StartupFolderExpanded?":1":":0"))}if(!this.RememberLastFolder){qs+=qs?"&amp;":"?";qs+="rlf=0"}if(this.Id){qs+=qs?"&amp;":"?";qs+="id="+encodeURIComponent(this.Id)}return url+qs}};
CKFinder.Create=function(basePath,width,height,selectFunction){var ckfinder;if(basePath!=null&&typeof basePath=="object"){ckfinder=new CKFinder;for(var _property in basePath)ckfinder[_property]=basePath[_property]}else ckfinder=new CKFinder(basePath,width,height,selectFunction);ckfinder.Create()};
CKFinder.Popup=function(basePath,width,height,selectFunction){var ckfinder;if(basePath!=null&&typeof basePath=="object"){ckfinder=new CKFinder;for(var _property in basePath)ckfinder[_property]=basePath[_property]}else ckfinder=new CKFinder(basePath,width,height,selectFunction);ckfinder.Popup(width,height)};
CKFinder.SetupFCKeditor=function(editorObj,basePath,imageType,flashType){var ckfinder;if(basePath!=null&&typeof basePath=="object"){ckfinder=new CKFinder;for(var _property in basePath){ckfinder[_property]=basePath[_property];if(_property=="Width"){var width=ckfinder[_property]||800;if(typeof width=="string"&&width.length>1&&width.substr(width.length-1,1)=="%")width=parseInt(window.screen.width*parseInt(width)/100);editorObj.Config["LinkBrowserWindowWidth"]=width;editorObj.Config["ImageBrowserWindowWidth"]=
width;editorObj.Config["FlashBrowserWindowWidth"]=width}else if(_property=="Height"){var height=ckfinder[_property]||600;if(typeof height=="string"&&height.length>1&&height.substr(height.length-1,1)=="%")height=parseInt(window.screen.height*parseInt(height)/100);editorObj.Config["LinkBrowserWindowHeight"]=height;editorObj.Config["ImageBrowserWindowHeight"]=height;editorObj.Config["FlashBrowserWindowHeight"]=height}}}else ckfinder=new CKFinder(basePath);var url=ckfinder.BasePath;if(url.substr(0,1)!=
"/"&&url.indexOf("://")==-1)url=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+url;url=ckfinder._BuildUrl(url);var qs=url.indexOf("?")!==-1?"&amp;":"?";editorObj.Config["LinkBrowserURL"]=url;editorObj.Config["ImageBrowserURL"]=url+qs+"type="+(imageType||"Images");editorObj.Config["FlashBrowserURL"]=url+qs+"type="+(flashType||"Flash");var dir=url.substring(0,1+url.lastIndexOf("/"));editorObj.Config["LinkUploadURL"]=dir+"core/connector/"+ckfinder.ConnectorLanguage+
"/connector."+ckfinder.ConnectorLanguage+"?command=QuickUpload&type=Files";editorObj.Config["ImageUploadURL"]=dir+"core/connector/"+ckfinder.ConnectorLanguage+"/connector."+ckfinder.ConnectorLanguage+"?command=QuickUpload&type="+(imageType||"Images");editorObj.Config["FlashUploadURL"]=dir+"core/connector/"+ckfinder.ConnectorLanguage+"/connector."+ckfinder.ConnectorLanguage+"?command=QuickUpload&type="+(flashType||"Flash")};
CKFinder.SetupCKEditor=function(editorObj,basePath,imageType,flashType){if(editorObj===null){for(var editorName in CKEDITOR.instances)CKFinder.SetupCKEditor(CKEDITOR.instances[editorName],basePath,imageType,flashType);CKEDITOR.on("instanceCreated",function(e){CKFinder.SetupCKEditor(e.editor,basePath,imageType,flashType)});return}var ckfinder;if(basePath!=null&&typeof basePath=="object"){ckfinder=new CKFinder;for(var _property in basePath){ckfinder[_property]=basePath[_property];if(_property=="Width"){var width=
ckfinder[_property]||800;if(typeof width=="string"&&width.length>1&&width.substr(width.length-1,1)=="%")width=parseInt(window.screen.width*parseInt(width)/100);editorObj.config.filebrowserWindowWidth=width}else if(_property=="Height"){var height=ckfinder[_property]||600;if(typeof height=="string"&&height.length>1&&height.substr(height.length-1,1)=="%")height=parseInt(window.screen.height*parseInt(height)/100);editorObj.config.filebrowserWindowHeight=width}}}else ckfinder=new CKFinder(basePath);var url=
ckfinder.BasePath;if(url.substr(0,1)!="/"&&url.indexOf("://")==-1)url=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+url;url=ckfinder._BuildUrl(url);var qs=url.indexOf("?")!==-1?"&amp;":"?";editorObj.config.filebrowserBrowseUrl=url;editorObj.config.filebrowserImageBrowseUrl=url+qs+"type="+(imageType||"Images");editorObj.config.filebrowserFlashBrowseUrl=url+qs+"type="+(flashType||"Flash");var dir=url.substring(0,1+url.lastIndexOf("/"));editorObj.config.filebrowserUploadUrl=
dir+"core/connector/"+ckfinder.ConnectorLanguage+"/connector."+ckfinder.ConnectorLanguage+"?command=QuickUpload&type=Files";editorObj.config.filebrowserImageUploadUrl=dir+"core/connector/"+ckfinder.ConnectorLanguage+"/connector."+ckfinder.ConnectorLanguage+"?command=QuickUpload&type="+(imageType||"Images");editorObj.config.filebrowserFlashUploadUrl=dir+"core/connector/"+ckfinder.ConnectorLanguage+"/connector."+ckfinder.ConnectorLanguage+"?command=QuickUpload&type="+(flashType||"Flash")};var flotObj=null;
$(function(){$("table.sortable").tablesorter({highlightClass:"highlight",dateFormat:"uk"});$(".menuitem > span.withsubmenu").click(function(){$(this).next().slideToggle("fast")});$(".menuitem > span.withsubmenu").toggle(function(){if($(this).next().length>0)$(this).css("border-bottom","1px solid #E3E3E3")},function(){if($(this).next().length>0){var that=$(this);setTimeout(function(){that.css("border-bottom","none")},300)}});$(".confirmable").click(function(){if(!confirm($(this).attr("confirmationmsg")))return false});$("#btnCollapse").click(function(){if($(this).text()==
"Recolher campos"){$("div.panel-body").hide();$(".panel-arrow").addClass("panel-arrow-collapsed");$(this).text("Expandir campos")}else{$(this).text("Recolher campos");$(".panel-arrow").removeClass("panel-arrow-collapsed");$("div.panel-body").show()}});$("table.draggable").tableDnD({onDragClass:"grid-row-dragging",onDrop:function(table,row){sendSortOrder()}});$(".grid-header-cell").click(function(){setTimeout(sendSortOrder,500)});$("#useopenid").click(function(){$("#login-account").fadeOut();setTimeout(function(){$("#rpxframe").fadeIn()},
1E3)});$("#useregularaccount").click(function(){$("#rpxframe").fadeOut();setTimeout(function(){$("#login-account").fadeIn()},1E3)});function setWidth(){$("div.pagecontent").width($(window).width()-$("#menu-wrapper").width()-80)}$(window).resize(function(){setWidth()});setWidth()});
function displayFlash(_msg){$("#msg-body").text(_msg);var wrapper=$("#message-wrapper");wrapper.attr("style","margin-left: "+-(wrapper.width()/2)+"px;").fadeIn();setTimeout(function(){$("#message-wrapper").fadeOut()},5E3);$("html").animate({scrollTop:0})}
function onAnalyticsDataReceived(data){flotObj=$.plot($("#analytics-placeholder"),data.plotArray,{lines:{show:true},points:{show:true},xaxis:{mode:"time",timeformat:"%d/%m/%y",minTickSize:[1,"day"]}});$("#analytics-period").text(data.period);$("#total-visits").text(data.totalVisits)};function drawBreadCrumb(_arrItems){var breadcrumb=$("#breadcrumb");try{$.each(_arrItems,function(i,val){var canvas=$("<canvas class='bcitem' width='100' height='26'>"+val+"</canvas>").appendTo(breadcrumb);if(i<_arrItems.length-1)drawBreadCrumbItem(canvas[0]);else drawBreadCrumbItem(canvas[0],"#f5921f","#ffa740","#fff")})}catch(err){}}
function drawBreadCrumbItem(_elem,_bgColor1,_bgColor2,_txtColor){var txt=$(_elem).text();var context=_elem.getContext("2d");var angle=10;var bgColor1=_bgColor1||"#ccc";var bgColor2=_bgColor2||"#eee";var textColor=_txtColor||"#000";context.font="bold 12px Tahoma";var textWidth=context.measureText(txt).width+30;_elem.width=textWidth;context.strokeStyle="#bbb";context.lineCap="round";context.lineJoin="round";context.textBaseline="top";context.font="bold 12px Tahoma";context.moveTo(0.5,0.5);context.lineTo(_elem.width-
angle,0.5);context.lineTo(_elem.width,_elem.height/2);context.lineTo(_elem.width-angle,_elem.height-0.5);context.lineTo(0.5,_elem.height-0.5);context.lineTo(0.5,0.5);context.stroke();var my_gradient=context.createLinearGradient(0,_elem.height,0,0);my_gradient.addColorStop(0,bgColor1);my_gradient.addColorStop(1,bgColor2);context.fillStyle=my_gradient;context.fill();context.fillStyle=textColor;context.fillText(txt,10,7)};(function($){$.fn.menuButton=function(options){var defaults={text:"",navigateUrl:"#",iconUrl:"none",subMenuItems:[]};var options=$.extend(defaults,options);$(document).click(function(evt){var evtTarget=$(evt.target);if(evtTarget.closest("div.menu-item").length>0)return;$("div.submenu").hide();$("div.menu-item").removeClass("menu-item-pressed")});return this.each(function(){var o=options;var obj=$(this);obj.addClass("menu-item").append('<div class="menu-item-left"><div class="menu-item-right"><div class="menu-item-body"><div class="menu-item-body-text"></div></div></div></div>').mouseenter(function(){$(this).addClass("menu-item-hover")}).mouseleave(function(){$(this).removeClass("menu-item-hover")});
var buttonBodyText=$("div.menu-item-body-text",obj);if(o.subMenuItems.length>0){obj.addClass("menu-item-toggle").click(function(){$("div.submenu").hide();$("div.menu-item").removeClass("menu-item-pressed");var thisElem=$(this);if(!thisElem.hasClass("menu-item-pressed"))$(this).addClass("menu-item-pressed");else $(this).removeClass("menu-item-pressed")});buttonBodyText.text(o.text);buttonBodyText.addClass("menu-item-body-dropdown");var subMenuElement=buildSubmenu();obj.click(function(){var isSubmenuHidden=
subMenuElement.css("display")=="none";var thisElem=$(this);if(isSubmenuHidden){subMenuElement.show();subMenuElement.css({top:thisElem.offset().top+Utils.pxToInt(thisElem.css("height")),left:thisElem.offset().left})}else subMenuElement.hide()});$(".submenu-list > li",subMenuElement).click(function(e){if($(":first-child",this).hasClass("subitem-arrow"))e.stopPropagation();else $(this).parent().parent().hide()}).mouseenter(function(){if($(":first-child",this).hasClass("subitem-arrow")){var subsubWrapper=
$("div.submenu",this);subsubWrapper.css({top:$(this).position().top,left:$(this).width()}).show()}}).mouseleave(function(){if($(":first-child",this).hasClass("subitem-arrow"))$("div.submenu",this).hide()})}else buttonBodyText.append('<a href="'+o.navigateUrl+'">'+o.text+"</a>");if(o.iconUrl!="none"){var iconWrapper=$('<div class="menu-item-body-icon"></div>');iconWrapper.css("background","url("+o.iconUrl+") no-repeat");iconWrapper.css("padding-left",20);$("div.menu-item-body-text",obj).wrap(iconWrapper)}});
function buildSubmenu(){var o=options;var subMenuWrapper=$('<div class="submenu"><ul class="submenu-list"></ul></div>');var subMenuList=$("ul.submenu-list",subMenuWrapper);var totalItems=o.subMenuItems.length;for(var i=0;i<totalItems;i++){var subItem=o.subMenuItems[i];var itemAnchor=$("<a>"+subItem.text+"</a>");if(subItem.navigateUrl!=undefined)itemAnchor.attr("href",subItem.navigateUrl);subMenuList.append(itemAnchor);var thisAnchor=itemAnchor.wrap("<li></li>");if(subItem.subMenuItems!=undefined&&
subItem.subMenuItems.length>0){itemAnchor.addClass("subitem-arrow");var subsubWrapper=$('<div class="submenu"><ul class="submenu-list"></ul></div>');var subsubMenuList=$("ul.submenu-list",subsubWrapper);var totalSubItems=subItem.subMenuItems.length;for(var j=0;j<totalSubItems;j++){var subsubItem=subItem.subMenuItems[j];subsubMenuList.append('<li><a href="'+subsubItem.navigateUrl+'">'+subsubItem.text+"</a></li>")}thisAnchor.parent().append(subsubWrapper)}}$("body").append(subMenuWrapper);return subMenuWrapper}
}})(jQuery);jQuery.log=function(message){if(window.console)console.debug(message)};(function($){$.fn.ajaxSubmit=function(options){if(!this.length){log("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof options=="function")options={success:options};var url=$.trim(this.attr("action"));if(url)url=(url.match(/^([^#]+)/)||[])[1];url=url||window.location.href||"";options=$.extend({url:url,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},options||{});var veto={};this.trigger("form-pre-serialize",
[this,options,veto]);if(veto.veto){log("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var a=this.formToArray(options.semantic);if(options.data){options.extraData=options.data;for(var n in options.data)if(options.data[n]instanceof Array)for(var k in options.data[n])a.push({name:n,value:options.data[n][k]});else a.push({name:n,
value:options.data[n]})}if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[a,this,options,veto]);if(veto.veto){log("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var q=$.param(a);if(options.type.toUpperCase()=="GET"){options.url+=(options.url.indexOf("?")>=0?"&":"?")+q;options.data=null}else options.data=q;var $form=this,callbacks=[];if(options.resetForm)callbacks.push(function(){$form.resetForm()});
if(options.clearForm)callbacks.push(function(){$form.clearForm()});if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?"replaceWith":"html";$(options.target)[fn](data).each(oldSuccess,arguments)})}else if(options.success)callbacks.push(options.success);options.success=function(data,status,xhr){for(var i=0,max=callbacks.length;i<max;i++)callbacks[i].apply(options,[data,status,xhr||$form,$form])};var files=$("input:file",
this).fieldValue();var found=false;for(var j=0;j<files.length;j++)if(files[j])found=true;var multipart=false;if(files.length&&options.iframe!==false||options.iframe||found||multipart)if(options.closeKeepAlive)$.get(options.closeKeepAlive,fileUpload);else fileUpload();else $.ajax(options);this.trigger("form-submit-notify",[this,options]);return this;function fileUpload(){var form=$form[0];if($(":input[name=submit]",form).length){alert('Error: Form elements must not be named "submit".');return}var opts=
$.extend({},$.ajaxSettings,options);var s=$.extend(true,{},$.extend(true,{},$.ajaxSettings),opts);var id="jqFormIO"+(new Date).getTime();var $io=$('<iframe id="'+id+'" name="'+id+'" src="'+opts.iframeSrc+'" onload="(jQuery(this).data(\'form-plugin-onload\'))()" />');var io=$io[0];$io.css({position:"absolute",top:"-1000px",left:"-1000px"});var xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},
abort:function(){this.aborted=1;$io.attr("src",opts.iframeSrc)}};var g=opts.global;if(g&&!$.active++)$.event.trigger("ajaxStart");if(g)$.event.trigger("ajaxSend",[xhr,opts]);if(s.beforeSend&&s.beforeSend(xhr,s)===false){s.global&&$.active--;return}if(xhr.aborted)return;var cbInvoked=false;var timedOut=0;var sub=form.clk;if(sub){var n=sub.name;if(n&&!sub.disabled){opts.extraData=opts.extraData||{};opts.extraData[n]=sub.value;if(sub.type=="image"){opts.extraData[n+".x"]=form.clk_x;opts.extraData[n+
".y"]=form.clk_y}}}function doSubmit(){var t=$form.attr("target"),a=$form.attr("action");form.setAttribute("target",id);if(form.getAttribute("method")!="POST")form.setAttribute("method","POST");if(form.getAttribute("action")!=opts.url)form.setAttribute("action",opts.url);if(!opts.skipEncodingOverride)$form.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});if(opts.timeout)setTimeout(function(){timedOut=true;cb()},opts.timeout);var extraInputs=[];try{if(opts.extraData)for(var n in opts.extraData)extraInputs.push($('<input type="hidden" name="'+
n+'" value="'+opts.extraData[n]+'" />').appendTo(form)[0]);$io.appendTo("body");$io.data("form-plugin-onload",cb);form.submit()}finally{form.setAttribute("action",a);t?form.setAttribute("target",t):$form.removeAttr("target");$(extraInputs).remove()}}if(opts.forceSync)doSubmit();else setTimeout(doSubmit,10);var domCheckCount=100;function cb(){if(cbInvoked)return;var ok=true;try{if(timedOut)throw"timeout";var data,doc;doc=io.contentWindow?io.contentWindow.document:io.contentDocument?io.contentDocument:
io.document;var isXml=opts.dataType=="xml"||doc.XMLDocument||$.isXMLDoc(doc);log("isXml="+isXml);if(!isXml&&(doc.body==null||doc.body.innerHTML=="")){if(--domCheckCount){log("requeing onLoad callback, DOM not available");setTimeout(cb,250);return}log("Could not access iframe DOM after 100 tries.");return}log("response detected");cbInvoked=true;xhr.responseText=doc.body?doc.body.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;xhr.getResponseHeader=function(header){var headers={"content-type":opts.dataType};
return headers[header]};if(opts.dataType=="json"||opts.dataType=="script"){var ta=doc.getElementsByTagName("textarea")[0];if(ta)xhr.responseText=ta.value;else{var pre=doc.getElementsByTagName("pre")[0];if(pre)xhr.responseText=pre.innerHTML}}else if(opts.dataType=="xml"&&!xhr.responseXML&&xhr.responseText!=null)xhr.responseXML=toXml(xhr.responseText);data=$.httpData(xhr,opts.dataType)}catch(e){log("error caught:",e);ok=false;xhr.error=e;$.handleError(opts,xhr,"error",e)}if(ok){opts.success(data,"success");
if(g)$.event.trigger("ajaxSuccess",[xhr,opts])}if(g)$.event.trigger("ajaxComplete",[xhr,opts]);if(g&&!--$.active)$.event.trigger("ajaxStop");if(opts.complete)opts.complete(xhr,ok?"success":"error");setTimeout(function(){$io.removeData("form-plugin-onload");$io.remove();xhr.responseXML=null},100)}function toXml(s,doc){if(window.ActiveXObject){doc=new ActiveXObject("Microsoft.XMLDOM");doc.async="false";doc.loadXML(s)}else doc=(new DOMParser).parseFromString(s,"text/xml");return doc&&doc.documentElement&&
doc.documentElement.tagName!="parsererror"?doc:null}}};$.fn.ajaxForm=function(options){return this.ajaxFormUnbind().bind("submit.form-plugin",function(e){e.preventDefault();$(this).ajaxSubmit(options)}).bind("click.form-plugin",function(e){var target=e.target;var $el=$(target);if(!$el.is(":submit,input:image")){var t=$el.closest(":submit");if(t.length==0)return;target=t[0]}var form=this;form.clk=target;if(target.type=="image")if(e.offsetX!=undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY}else if(typeof $.fn.offset==
"function"){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop}setTimeout(function(){form.clk=form.clk_x=form.clk_y=null},100)})};$.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};$.fn.formToArray=function(semantic){var a=[];if(this.length==0)return a;var form=this[0];var els=semantic?form.getElementsByTagName("*"):form.elements;if(!els)return a;
for(var i=0,max=els.length;i<max;i++){var el=els[i];var n=el.name;if(!n)continue;if(semantic&&form.clk&&el.type=="image"){if(!el.disabled&&form.clk==el){a.push({name:n,value:$(el).val()});a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y})}continue}var v=$.fieldValue(el,true);if(v&&v.constructor==Array)for(var j=0,jmax=v.length;j<jmax;j++)a.push({name:n,value:v[j]});else if(v!==null&&typeof v!="undefined")a.push({name:n,value:v})}if(!semantic&&form.clk){var $input=$(form.clk),input=
$input[0],n=input.name;if(n&&!input.disabled&&input.type=="image"){a.push({name:n,value:$input.val()});a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y})}}return a};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic))};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n)return;var v=$.fieldValue(this,successful);if(v&&v.constructor==Array)for(var i=0,max=v.length;i<max;i++)a.push({name:n,value:v[i]});else if(v!==
null&&typeof v!="undefined")a.push({name:this.name,value:v})});return $.param(a)};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=="undefined"||v.constructor==Array&&!v.length)continue;v.constructor==Array?$.merge(val,v):val.push(v)}return val};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(typeof successful=="undefined")successful=true;if(successful&&
(!n||el.disabled||t=="reset"||t=="button"||(t=="checkbox"||t=="radio")&&!el.checked||(t=="submit"||t=="image")&&el.form&&el.form.clk!=el||tag=="select"&&el.selectedIndex==-1))return null;if(tag=="select"){var index=el.selectedIndex;if(index<0)return null;var a=[],ops=el.options;var one=t=="select-one";var max=one?index+1:ops.length;for(var i=one?index:0;i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v)v=op.attributes&&op.attributes["value"]&&!op.attributes["value"].specified?op.text:
op.value;if(one)return v;a.push(v)}}return a}return el.value};$.fn.clearForm=function(){return this.each(function(){$("input,select,textarea",this).clearFields()})};$.fn.clearFields=$.fn.clearInputs=function(){return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(t=="text"||t=="password"||tag=="textarea")this.value="";else if(t=="checkbox"||t=="radio")this.checked=false;else if(tag=="select")this.selectedIndex=-1})};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset==
"function"||typeof this.reset=="object"&&!this.reset.nodeType)this.reset()})};$.fn.enable=function(b){if(b==undefined)b=true;return this.each(function(){this.disabled=!b})};$.fn.selected=function(select){if(select==undefined)select=true;return this.each(function(){var t=this.type;if(t=="checkbox"||t=="radio")this.checked=select;else if(this.tagName.toLowerCase()=="option"){var $sel=$(this).parent("select");if(select&&$sel[0]&&$sel[0].type=="select-one")$sel.find("option").selected(false);this.selected=
select}})};function log(){if($.fn.ajaxSubmit.debug){var msg="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log)window.console.log(msg);else if(window.opera&&window.opera.postError)window.opera.postError(msg)}}})(jQuery);(function($){$.fn.lazyload=function(options){var settings={threshold:0,failurelimit:0,event:"scroll",effect:"show",container:window};if(options)$.extend(settings,options);var elements=this;if("scroll"==settings.event)$(settings.container).bind("scroll",function(event){var counter=0;elements.each(function(){if($.abovethetop(this,settings)||$.leftofbegin(this,settings));else if(!$.belowthefold(this,settings)&&!$.rightoffold(this,settings))$(this).trigger("appear");else if(counter++>settings.failurelimit)return false});
var temp=$.grep(elements,function(element){return!element.loaded});elements=$(temp)});this.each(function(){var self=this;if(undefined==$(self).attr("original"))$(self).attr("original",$(self).attr("src"));if("scroll"!=settings.event||undefined==$(self).attr("src")||settings.placeholder==$(self).attr("src")||$.abovethetop(self,settings)||$.leftofbegin(self,settings)||$.belowthefold(self,settings)||$.rightoffold(self,settings)){if(settings.placeholder)$(self).attr("src",settings.placeholder);else $(self).removeAttr("src");
self.loaded=false}else self.loaded=true;$(self).one("appear",function(){if(!this.loaded)$("<img />").bind("load",function(){$(self).hide().attr("src",$(self).attr("original"))[settings.effect](settings.effectspeed);self.loaded=true}).attr("src",$(self).attr("original"))});if("scroll"!=settings.event)$(self).bind(settings.event,function(event){if(!self.loaded)$(self).trigger("appear")})});$(settings.container).trigger(settings.event);return this};$.belowthefold=function(element,settings){if(settings.container===
undefined||settings.container===window)var fold=$(window).height()+$(window).scrollTop();else var fold=$(settings.container).offset().top+$(settings.container).height();return fold<=$(element).offset().top-settings.threshold};$.rightoffold=function(element,settings){if(settings.container===undefined||settings.container===window)var fold=$(window).width()+$(window).scrollLeft();else var fold=$(settings.container).offset().left+$(settings.container).width();return fold<=$(element).offset().left-settings.threshold};
$.abovethetop=function(element,settings){if(settings.container===undefined||settings.container===window)var fold=$(window).scrollTop();else var fold=$(settings.container).offset().top;return fold>=$(element).offset().top+settings.threshold+$(element).height()};$.leftofbegin=function(element,settings){if(settings.container===undefined||settings.container===window)var fold=$(window).scrollLeft();else var fold=$(settings.container).offset().left;return fold>=$(element).offset().left+settings.threshold+
$(element).width()};$.extend($.expr[":"],{"below-the-fold":"$.belowthefold(a, {threshold : 0, container: window})","above-the-fold":"!$.belowthefold(a, {threshold : 0, container: window})","right-of-fold":"$.rightoffold(a, {threshold : 0, container: window})","left-of-fold":"!$.rightoffold(a, {threshold : 0, container: window})"})})(jQuery);(function(a){var r=a.fn.domManip,d="_tmplitem",q=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,b={},f={},e,p={key:0,data:{}},h=0,c=0,l=[];function g(e,d,g,i){var c={data:i||(d?d.data:{}),_wrap:d?d._wrap:null,tmpl:null,parent:d||null,nodes:[],calls:u,nest:w,wrap:x,html:v,update:t};e&&a.extend(c,e,{nodes:[],parent:d});if(g){c.tmpl=g;c._ctnt=c._ctnt||c.tmpl(a,c);c.key=++h;(l.length?f:b)[h]=c}return c}a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},
function(f,d){a.fn[f]=function(n){var g=[],i=a(n),k,h,m,l,j=this.length===1&&this[0].parentNode;e=b||{};if(j&&j.nodeType===11&&j.childNodes.length===1&&i.length===1){i[d](this[0]);g=this}else{for(h=0,m=i.length;h<m;h++){c=h;k=(h>0?this.clone(true):this).get();a.fn[d].apply(a(i[h]),k);g=g.concat(k)}c=0;g=this.pushStack(g,f,i.selector)}l=e;e=null;a.tmpl.complete(l);return g}});a.fn.extend({tmpl:function(d,c,b){return a.tmpl(this[0],d,c,b)},tmplItem:function(){return a.tmplItem(this[0])},template:function(b){return a.template(b,
this[0])},domManip:function(d,l,j){if(d[0]&&d[0].nodeType){var f=a.makeArray(arguments),g=d.length,i=0,h;while(i<g&&!(h=a.data(d[i++],"tmplItem")));if(g>1)f[0]=[a.makeArray(d)];if(h&&c)f[2]=function(b){a.tmpl.afterManip(this,b,j)};r.apply(this,f)}else r.apply(this,arguments);c=0;!e&&a.tmpl.complete(b);return this}});a.extend({tmpl:function(d,h,e,c){var j,k=!c;if(k){c=p;d=a.template[d]||a.template(null,d);f={}}else if(!d){d=c.tmpl;b[c.key]=c;c.nodes=[];c.wrapped&&n(c,c.wrapped);return a(i(c,null,c.tmpl(a,
c)))}if(!d)return[];if(typeof h==="function")h=h.call(c||{});e&&e.wrapped&&n(e,e.wrapped);j=a.isArray(h)?a.map(h,function(a){return a?g(e,c,d,a):null}):[g(e,c,d,h)];return k?a(i(c,null,j)):j},tmplItem:function(b){var c;if(b instanceof a)b=b[0];while(b&&b.nodeType===1&&!(c=a.data(b,"tmplItem"))&&(b=b.parentNode));return c||p},template:function(c,b){if(b){if(typeof b==="string")b=o(b);else if(b instanceof a)b=b[0]||{};if(b.nodeType)b=a.data(b,"tmpl")||a.data(b,"tmpl",o(b.innerHTML));return typeof c===
"string"?a.template[c]=b:b}return c?typeof c!=="string"?a.template(null,c):a.template[c]||a.template(null,q.test(c)?c:a(c)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},
open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(){b={}},afterManip:function(f,b,d){var e=b.nodeType===11?a.makeArray(b.childNodes):b.nodeType===1?[b]:[];d.call(f,b);m(e);c++}});function i(e,g,f){var b,c=f?a.map(f,
function(a){return typeof a==="string"?e.key?a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+d+'="'+e.key+'" $2'):a:i(a,e,a._ctnt)}):e;if(g)return c;c=c.join("");c.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(f,c,e,d){b=a(e).get();m(b);if(c)b=j(c).concat(b);if(d)b=b.concat(j(d))});return b?b:j(c)}function j(c){var b=document.createElement("div");b.innerHTML=c;return a.makeArray(b.childNodes)}function o(b){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+
a.trim(b).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(m,l,j,d,b,c,e){var i=a.tmpl.tag[j],h,f,g;if(!i)throw"Template command not found: "+j;h=i._default||[];if(c&&!/\w$/.test(b)){b+=c;c=""}if(b){b=k(b);e=e?","+k(e)+")":c?")":"";f=c?b.indexOf(".")>-1?b+c:"("+b+").call($item"+e:b;g=c?f:"(typeof("+b+")==='function'?("+b+").call($item):("+
b+"))"}else g=f=h.$1||"null";d=k(d);return"');"+i[l?"close":"open"].split("$notnull_1").join(b?"typeof("+b+")!=='undefined' && ("+b+")!=null":"true").split("$1a").join(g).split("$1").join(f).split("$2").join(d?d.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(d,c,b,a){a=a?","+a+")":b?")":"";return a?"("+c+").call($item"+a:d}):h.$2||"")+"_.push('"})+"');}return _;")}function n(c,b){c._wrap=i(c,true,a.isArray(b)?b:[q.test(b)?b:a(b).html()]).join("")}function k(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,
"\\"):null}function s(b){var a=document.createElement("div");a.appendChild(b.cloneNode(true));return a.innerHTML}function m(o){var n="_"+c,k,j,l={},e,p,i;for(e=0,p=o.length;e<p;e++){if((k=o[e]).nodeType!==1)continue;j=k.getElementsByTagName("*");for(i=j.length-1;i>=0;i--)m(j[i]);m(k)}function m(j){var p,i=j,k,e,m;if(m=j.getAttribute(d)){while(i.parentNode&&(i=i.parentNode).nodeType===1&&!(p=i.getAttribute(d)));if(p!==m){i=i.parentNode?i.nodeType===11?0:i.getAttribute(d)||0:0;if(!(e=b[m])){e=f[m];
e=g(e,b[i]||f[i],null,true);e.key=++h;b[h]=e}c&&o(m)}j.removeAttribute(d)}else if(c&&(e=a.data(j,"tmplItem"))){o(e.key);b[e.key]=e;i=a.data(j.parentNode,"tmplItem");i=i?i.key:0}if(e){k=e;while(k&&k.key!=i){k.nodes.push(j);k=k.parent}delete e._ctnt;delete e._wrap;a.data(j,"tmplItem",e)}function o(a){a=a+n;e=l[a]=l[a]||g(e,b[e.parent.key+n]||e.parent,null,true)}}}function u(a,d,c,b){if(!a)return l.pop();l.push({_:a,tmpl:d,item:this,data:c,options:b})}function w(d,c,b){return a.tmpl(a.template(d),c,
b,this)}function x(b,d){var c=b.options||{};c.wrapped=d;return a.tmpl(a.template(b.tmpl),b.data,c,b.item)}function v(d,c){var b=this._wrap;return a.map(a(a.isArray(b)?b.join(""):b).filter(d||"*"),function(a){return c?a.innerText||a.textContent:a.outerHTML||s(a)})}function t(){var b=this.nodes;a.tmpl(null,null,null,this).insertBefore(b[0]);a(b).remove()}})(jQuery);jQuery.cookie=function(name,value,options){if(typeof value!="undefined"){options=options||{};if(value===null){value="";options.expires=-1}var expires="";if(options.expires&&(typeof options.expires=="number"||options.expires.toUTCString)){var date;if(typeof options.expires=="number"){date=new Date;date.setTime(date.getTime()+options.expires*24*60*60*1E3)}else date=options.expires;expires="; expires="+date.toUTCString()}var path=options.path?"; path="+options.path:"";var domain=options.domain?"; domain="+
options.domain:"";var secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("")}else{var cookieValue=null;if(document.cookie&&document.cookie!=""){var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}return cookieValue}};(function($){$.fn.maskMoney=function(settings){settings=$.extend({symbol:"US$",decimal:".",precision:2,thousands:",",allowZero:false,showSymbol:false},settings);settings.symbol=settings.symbol+" ";return this.each(function(){var input=$(this);function keypressEvent(e){e=e||window.event;var k=e.charCode||e.keyCode||e.which;if(k==8){preventDefault(e);var x=input.val().substring(0,input.val().length-1);input.val(maskValue(x));return false}else if(k==9)return true;if(k<48||k>57){preventDefault(e);return true}else if(input.val().length==
input.attr("maxlength"))return false;var key=String.fromCharCode(k);preventDefault(e);input.val(maskValue(input.val()+key))}function focusEvent(e){if(input.val()=="")input.val(setSymbol(getDefaultMask()));else input.val(setSymbol(input.val()));if(this.createTextRange){var textRange=this.createTextRange();textRange.collapse(false);textRange.select()}}function blurEvent(e){if($.browser.msie)keypressEvent(e);if(input.val()==setSymbol(getDefaultMask())){if(!settings.allowZero)input.val("")}else input.val(input.val().replace(settings.symbol,
""))}function preventDefault(e){if(e.preventDefault)e.preventDefault();else e.returnValue=false}function maskValue(v){v=v.replace(settings.symbol,"");var strCheck="0123456789";var len=v.length;var a="",t="";if(len==0)t="0.00";for(var i=0;i<len;i++)if(v.charAt(i)!="0"&&v.charAt(i)!=settings.decimal)break;for(;i<len;i++)if(strCheck.indexOf(v.charAt(i))!=-1)a+=v.charAt(i);var n=parseFloat(a);n=isNaN(n)?0:n/Math.pow(10,settings.precision);t=n.toFixed(settings.precision);i=settings.precision==0?0:1;var p,
d=(t=t.split("."))[i].substr(0,settings.precision);for(p=(t=t[0]).length;(p-=3)>=1;)t=t.substr(0,p)+settings.thousands+t.substr(p);return settings.precision>0?setSymbol(t+settings.decimal+d+Array(settings.precision+1-d.length).join(0)):setSymbol(t)}function getDefaultMask(){var n=parseFloat("0")/Math.pow(10,settings.precision);return n.toFixed(settings.precision).replace(new RegExp("\\.","g"),settings.decimal)}function setSymbol(v){if(settings.showSymbol)return settings.symbol+v;return v}input.bind("keypress",
keypressEvent);input.bind("blur",blurEvent);input.bind("focus",focusEvent);input.one("unmaskMoney",function(){input.unbind("focus",focusEvent);input.unbind("blur",blurEvent);input.unbind("keypress",keypressEvent);if($.browser.msie)this.onpaste=null;else if($.browser.mozilla)this.removeEventListener("input",blurEvent,false)})})};$.fn.unmaskMoney=function(){return this.trigger("unmaskMoney")}})(jQuery);(function($){$.Jcrop=function(obj,opt){var obj=obj,opt=opt;if(typeof obj!=="object")obj=$(obj)[0];if(typeof opt!=="object")opt={};if(!("trackDocument"in opt)){opt.trackDocument=$.browser.msie?false:true;if($.browser.msie&&$.browser.version.split(".")[0]=="8")opt.trackDocument=true}if(!("keySupport"in opt))opt.keySupport=$.browser.msie?false:true;var defaults={trackDocument:false,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:0.6,borderOpacity:0.4,handleOpacity:0.5,handlePad:5,handleSize:9,
handleOffset:5,edgeMargin:14,aspectRatio:0,keySupport:true,cornerHandles:true,sideHandles:true,drawBorders:true,dragEdges:true,boxWidth:0,boxHeight:0,boundary:8,animationDelay:20,swingSpeed:3,allowSelect:true,allowMove:true,allowResize:true,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){}};var options=defaults;setOptions(opt);var $origimg=$(obj);var $img=$origimg.clone().removeAttr("id").css({position:"absolute"});$img.width($origimg.width());$img.height($origimg.height());
$origimg.after($img).hide();presize($img,options.boxWidth,options.boxHeight);var boundx=$img.width(),boundy=$img.height(),$div=$("<div />").width(boundx).height(boundy).addClass(cssClass("holder")).css({position:"relative",backgroundColor:options.bgColor}).insertAfter($origimg).append($img);if(options.addClass)$div.addClass(options.addClass);var $img2=$("<img />").attr("src",$img.attr("src")).css("position","absolute").width(boundx).height(boundy);var $img_holder=$("<div />").width(pct(100)).height(pct(100)).css({zIndex:310,
position:"absolute",overflow:"hidden"}).append($img2);var $hdl_holder=$("<div />").width(pct(100)).height(pct(100)).css("zIndex",320);var $sel=$("<div />").css({position:"absolute",zIndex:300}).insertBefore($img).append($img_holder,$hdl_holder);var bound=options.boundary;var $trk=newTracker().width(boundx+bound*2).height(boundy+bound*2).css({position:"absolute",top:px(-bound),left:px(-bound),zIndex:290}).mousedown(newSelection);var xlimit,ylimit,xmin,ymin;var xscale,yscale,enabled=true;var docOffset=
getPos($img),btndown,lastcurs,dimmed,animating,shift_down;var Coords=function(){var x1=0,y1=0,x2=0,y2=0,ox,oy;function setPressed(pos){var pos=rebound(pos);x2=x1=pos[0];y2=y1=pos[1]}function setCurrent(pos){var pos=rebound(pos);ox=pos[0]-x2;oy=pos[1]-y2;x2=pos[0];y2=pos[1]}function getOffset(){return[ox,oy]}function moveOffset(offset){var ox=offset[0],oy=offset[1];if(0>x1+ox)ox-=ox+x1;if(0>y1+oy)oy-=oy+y1;if(boundy<y2+oy)oy+=boundy-(y2+oy);if(boundx<x2+ox)ox+=boundx-(x2+ox);x1+=ox;x2+=ox;y1+=oy;y2+=
oy}function getCorner(ord){var c=getFixed();switch(ord){case "ne":return[c.x2,c.y];case "nw":return[c.x,c.y];case "se":return[c.x2,c.y2];case "sw":return[c.x,c.y2]}}function getFixed(){if(!options.aspectRatio)return getRect();var aspect=options.aspectRatio,min_x=options.minSize[0]/xscale,min_y=options.minSize[1]/yscale,max_x=options.maxSize[0]/xscale,max_y=options.maxSize[1]/yscale,rw=x2-x1,rh=y2-y1,rwa=Math.abs(rw),rha=Math.abs(rh),real_ratio=rwa/rha,xx,yy;if(max_x==0)max_x=boundx*10;if(max_y==0)max_y=
boundy*10;if(real_ratio<aspect){yy=y2;w=rha*aspect;xx=rw<0?x1-w:w+x1;if(xx<0){xx=0;h=Math.abs((xx-x1)/aspect);yy=rh<0?y1-h:h+y1}else if(xx>boundx){xx=boundx;h=Math.abs((xx-x1)/aspect);yy=rh<0?y1-h:h+y1}}else{xx=x2;h=rwa/aspect;yy=rh<0?y1-h:y1+h;if(yy<0){yy=0;w=Math.abs((yy-y1)*aspect);xx=rw<0?x1-w:w+x1}else if(yy>boundy){yy=boundy;w=Math.abs(yy-y1)*aspect;xx=rw<0?x1-w:w+x1}}if(xx>x1){if(xx-x1<min_x)xx=x1+min_x;else if(xx-x1>max_x)xx=x1+max_x;if(yy>y1)yy=y1+(xx-x1)/aspect;else yy=y1-(xx-x1)/aspect}else if(xx<
x1){if(x1-xx<min_x)xx=x1-min_x;else if(x1-xx>max_x)xx=x1-max_x;if(yy>y1)yy=y1+(x1-xx)/aspect;else yy=y1-(x1-xx)/aspect}if(xx<0){x1-=xx;xx=0}else if(xx>boundx){x1-=xx-boundx;xx=boundx}if(yy<0){y1-=yy;yy=0}else if(yy>boundy){y1-=yy-boundy;yy=boundy}return last=makeObj(flipCoords(x1,y1,xx,yy))}function rebound(p){if(p[0]<0)p[0]=0;if(p[1]<0)p[1]=0;if(p[0]>boundx)p[0]=boundx;if(p[1]>boundy)p[1]=boundy;return[p[0],p[1]]}function flipCoords(x1,y1,x2,y2){var xa=x1,xb=x2,ya=y1,yb=y2;if(x2<x1){xa=x2;xb=x1}if(y2<
y1){ya=y2;yb=y1}return[Math.round(xa),Math.round(ya),Math.round(xb),Math.round(yb)]}function getRect(){var xsize=x2-x1;var ysize=y2-y1;if(xlimit&&Math.abs(xsize)>xlimit)x2=xsize>0?x1+xlimit:x1-xlimit;if(ylimit&&Math.abs(ysize)>ylimit)y2=ysize>0?y1+ylimit:y1-ylimit;if(ymin&&Math.abs(ysize)<ymin)y2=ysize>0?y1+ymin:y1-ymin;if(xmin&&Math.abs(xsize)<xmin)x2=xsize>0?x1+xmin:x1-xmin;if(x1<0){x2-=x1;x1-=x1}if(y1<0){y2-=y1;y1-=y1}if(x2<0){x1-=x2;x2-=x2}if(y2<0){y1-=y2;y2-=y2}if(x2>boundx){var delta=x2-boundx;
x1-=delta;x2-=delta}if(y2>boundy){var delta=y2-boundy;y1-=delta;y2-=delta}if(x1>boundx){var delta=x1-boundy;y2-=delta;y1-=delta}if(y1>boundy){var delta=y1-boundy;y2-=delta;y1-=delta}return makeObj(flipCoords(x1,y1,x2,y2))}function makeObj(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}return{flipCoords:flipCoords,setPressed:setPressed,setCurrent:setCurrent,getOffset:getOffset,moveOffset:moveOffset,getCorner:getCorner,getFixed:getFixed}}();var Selection=function(){var start,end,dragmode,
awake,hdep=370;var borders={};var handle={};var seehandles=false;var hhs=options.handleOffset;if(options.drawBorders)borders={top:insertBorder("hline").css("top",$.browser.msie?px(-1):px(0)),bottom:insertBorder("hline"),left:insertBorder("vline"),right:insertBorder("vline")};if(options.dragEdges){handle.t=insertDragbar("n");handle.b=insertDragbar("s");handle.r=insertDragbar("e");handle.l=insertDragbar("w")}options.sideHandles&&createHandles(["n","s","e","w"]);options.cornerHandles&&createHandles(["sw",
"nw","ne","se"]);function insertBorder(type){var jq=$("<div />").css({position:"absolute",opacity:options.borderOpacity}).addClass(cssClass(type));$img_holder.append(jq);return jq}function dragDiv(ord,zi){var jq=$("<div />").mousedown(createDragger(ord)).css({cursor:ord+"-resize",position:"absolute",zIndex:zi});$hdl_holder.append(jq);return jq}function insertHandle(ord){return dragDiv(ord,hdep++).css({top:px(-hhs+1),left:px(-hhs+1),opacity:options.handleOpacity}).addClass(cssClass("handle"))}function insertDragbar(ord){var s=
options.handleSize,o=hhs,h=s,w=s,t=o,l=o;switch(ord){case "n":case "s":w=pct(100);break;case "e":case "w":h=pct(100);break}return dragDiv(ord,hdep++).width(w).height(h).css({top:px(-t+1),left:px(-l+1)})}function createHandles(li){for(i in li)handle[li[i]]=insertHandle(li[i])}function moveHandles(c){var midvert=Math.round(c.h/2-hhs),midhoriz=Math.round(c.w/2-hhs),north=west=-hhs+1,east=c.w-hhs,south=c.h-hhs,x,y;"e"in handle&&handle.e.css({top:px(midvert),left:px(east)})&&handle.w.css({top:px(midvert)})&&
handle.s.css({top:px(south),left:px(midhoriz)})&&handle.n.css({left:px(midhoriz)});"ne"in handle&&handle.ne.css({left:px(east)})&&handle.se.css({top:px(south),left:px(east)})&&handle.sw.css({top:px(south)});"b"in handle&&handle.b.css({top:px(south)})&&handle.r.css({left:px(east)})}function moveto(x,y){$img2.css({top:px(-y),left:px(-x)});$sel.css({top:px(y),left:px(x)})}function resize(w,h){$sel.width(w).height(h)}function refresh(){var c=Coords.getFixed();Coords.setPressed([c.x,c.y]);Coords.setCurrent([c.x2,
c.y2]);updateVisible()}function updateVisible(){if(awake)return update()}function update(){var c=Coords.getFixed();resize(c.w,c.h);moveto(c.x,c.y);options.drawBorders&&borders["right"].css({left:px(c.w-1)})&&borders["bottom"].css({top:px(c.h-1)});seehandles&&moveHandles(c);awake||show();options.onChange(unscale(c))}function show(){$sel.show();$img.css("opacity",options.bgOpacity);awake=true}function release(){disableHandles();$sel.hide();$img.css("opacity",1);awake=false}function showHandles(){if(seehandles){moveHandles(Coords.getFixed());
$hdl_holder.show()}}function enableHandles(){seehandles=true;if(options.allowResize){moveHandles(Coords.getFixed());$hdl_holder.show();return true}}function disableHandles(){seehandles=false;$hdl_holder.hide()}function animMode(v){(animating=v)?disableHandles():enableHandles()}function done(){animMode(false);refresh()}var $track=newTracker().mousedown(createDragger("move")).css({cursor:"move",position:"absolute",zIndex:360});$img_holder.append($track);disableHandles();return{updateVisible:updateVisible,
update:update,release:release,refresh:refresh,setCursor:function(cursor){$track.css("cursor",cursor)},enableHandles:enableHandles,enableOnly:function(){seehandles=true},showHandles:showHandles,disableHandles:disableHandles,animMode:animMode,done:done}}();var Tracker=function(){var onMove=function(){},onDone=function(){},trackDoc=options.trackDocument;if(!trackDoc)$trk.mousemove(trackMove).mouseup(trackUp).mouseout(trackUp);function toFront(){$trk.css({zIndex:450});if(trackDoc)$(document).mousemove(trackMove).mouseup(trackUp)}
function toBack(){$trk.css({zIndex:290});if(trackDoc)$(document).unbind("mousemove",trackMove).unbind("mouseup",trackUp)}function trackMove(e){onMove(mouseAbs(e))}function trackUp(e){e.preventDefault();e.stopPropagation();if(btndown){btndown=false;onDone(mouseAbs(e));options.onSelect(unscale(Coords.getFixed()));toBack();onMove=function(){};onDone=function(){}}return false}function activateHandlers(move,done){btndown=true;onMove=move;onDone=done;toFront();return false}function setCursor(t){$trk.css("cursor",
t)}$img.before($trk);return{activateHandlers:activateHandlers,setCursor:setCursor}}();var KeyManager=function(){var $keymgr=$('<input type="radio" />').css({position:"absolute",left:"-30px"}).keypress(parseKey).blur(onBlur),$keywrap=$("<div />").css({position:"absolute",overflow:"hidden"}).append($keymgr);function watchKeys(){if(options.keySupport){$keymgr.show();$keymgr.focus()}}function onBlur(e){$keymgr.hide()}function doNudge(e,x,y){if(options.allowMove){Coords.moveOffset([x,y]);Selection.updateVisible()}e.preventDefault();
e.stopPropagation()}function parseKey(e){if(e.ctrlKey)return true;shift_down=e.shiftKey?true:false;var nudge=shift_down?10:1;switch(e.keyCode){case 37:doNudge(e,-nudge,0);break;case 39:doNudge(e,nudge,0);break;case 38:doNudge(e,0,-nudge);break;case 40:doNudge(e,0,nudge);break;case 27:Selection.release();break;case 9:return true}return nothing(e)}if(options.keySupport)$keywrap.insertBefore($img);return{watchKeys:watchKeys}}();function px(n){return""+parseInt(n)+"px"}function pct(n){return""+parseInt(n)+
"%"}function cssClass(cl){return options.baseClass+"-"+cl}function getPos(obj){var pos=$(obj).offset();return[pos.left,pos.top]}function mouseAbs(e){return[e.pageX-docOffset[0],e.pageY-docOffset[1]]}function myCursor(type){if(type!=lastcurs){Tracker.setCursor(type);lastcurs=type}}function startDragMode(mode,pos){docOffset=getPos($img);Tracker.setCursor(mode=="move"?mode:mode+"-resize");if(mode=="move")return Tracker.activateHandlers(createMover(pos),doneSelect);var fc=Coords.getFixed();var opp=oppLockCorner(mode);
var opc=Coords.getCorner(oppLockCorner(opp));Coords.setPressed(Coords.getCorner(opp));Coords.setCurrent(opc);Tracker.activateHandlers(dragmodeHandler(mode,fc),doneSelect)}function dragmodeHandler(mode,f){return function(pos){if(!options.aspectRatio)switch(mode){case "e":pos[1]=f.y2;break;case "w":pos[1]=f.y2;break;case "n":pos[0]=f.x2;break;case "s":pos[0]=f.x2;break}else switch(mode){case "e":pos[1]=f.y+1;break;case "w":pos[1]=f.y+1;break;case "n":pos[0]=f.x+1;break;case "s":pos[0]=f.x+1;break}Coords.setCurrent(pos);
Selection.update()}}function createMover(pos){var lloc=pos;KeyManager.watchKeys();return function(pos){Coords.moveOffset([pos[0]-lloc[0],pos[1]-lloc[1]]);lloc=pos;Selection.update()}}function oppLockCorner(ord){switch(ord){case "n":return"sw";case "s":return"nw";case "e":return"nw";case "w":return"ne";case "ne":return"sw";case "nw":return"se";case "se":return"nw";case "sw":return"ne"}}function createDragger(ord){return function(e){if(options.disabled)return false;if(ord=="move"&&!options.allowMove)return false;
btndown=true;startDragMode(ord,mouseAbs(e));e.stopPropagation();e.preventDefault();return false}}function presize($obj,w,h){var nw=$obj.width(),nh=$obj.height();if(nw>w&&w>0){nw=w;nh=w/$obj.width()*$obj.height()}if(nh>h&&h>0){nh=h;nw=h/$obj.height()*$obj.width()}xscale=$obj.width()/nw;yscale=$obj.height()/nh;$obj.width(nw).height(nh)}function unscale(c){return{x:parseInt(c.x*xscale),y:parseInt(c.y*yscale),x2:parseInt(c.x2*xscale),y2:parseInt(c.y2*yscale),w:parseInt(c.w*xscale),h:parseInt(c.h*yscale)}}
function doneSelect(pos){var c=Coords.getFixed();if(c.w>options.minSelect[0]&&c.h>options.minSelect[1]){Selection.enableHandles();Selection.done()}else Selection.release();Tracker.setCursor(options.allowSelect?"crosshair":"default")}function newSelection(e){if(options.disabled)return false;if(!options.allowSelect)return false;btndown=true;docOffset=getPos($img);Selection.disableHandles();myCursor("crosshair");var pos=mouseAbs(e);Coords.setPressed(pos);Tracker.activateHandlers(selectDrag,doneSelect);
KeyManager.watchKeys();Selection.update();e.stopPropagation();e.preventDefault();return false}function selectDrag(pos){Coords.setCurrent(pos);Selection.update()}function newTracker(){var trk=$("<div></div>").addClass(cssClass("tracker"));$.browser.msie&&trk.css({opacity:0,backgroundColor:"white"});return trk}function animateTo(a){var x1=a[0]/xscale,y1=a[1]/yscale,x2=a[2]/xscale,y2=a[3]/yscale;if(animating)return;var animto=Coords.flipCoords(x1,y1,x2,y2);var c=Coords.getFixed();var animat=initcr=[c.x,
c.y,c.x2,c.y2];var interv=options.animationDelay;var x=animat[0];var y=animat[1];var x2=animat[2];var y2=animat[3];var ix1=animto[0]-initcr[0];var iy1=animto[1]-initcr[1];var ix2=animto[2]-initcr[2];var iy2=animto[3]-initcr[3];var pcent=0;var velocity=options.swingSpeed;Selection.animMode(true);var animator=function(){return function(){pcent+=(100-pcent)/velocity;animat[0]=x+pcent/100*ix1;animat[1]=y+pcent/100*iy1;animat[2]=x2+pcent/100*ix2;animat[3]=y2+pcent/100*iy2;if(pcent<100)animateStart();else Selection.done();
if(pcent>=99.8)pcent=100;setSelectRaw(animat)}}();function animateStart(){window.setTimeout(animator,interv)}animateStart()}function setSelect(rect){setSelectRaw([rect[0]/xscale,rect[1]/yscale,rect[2]/xscale,rect[3]/yscale])}function setSelectRaw(l){Coords.setPressed([l[0],l[1]]);Coords.setCurrent([l[2],l[3]]);Selection.update()}function setOptions(opt){if(typeof opt!="object")opt={};options=$.extend(options,opt);if(typeof options.onChange!=="function")options.onChange=function(){};if(typeof options.onSelect!==
"function")options.onSelect=function(){}}function tellSelect(){return unscale(Coords.getFixed())}function tellScaled(){return Coords.getFixed()}function setOptionsNew(opt){setOptions(opt);interfaceUpdate()}function disableCrop(){options.disabled=true;Selection.disableHandles();Selection.setCursor("default");Tracker.setCursor("default")}function enableCrop(){options.disabled=false;interfaceUpdate()}function cancelCrop(){Selection.done();Tracker.activateHandlers(null,null)}function destroy(){$div.remove();
$origimg.show()}function interfaceUpdate(alt){options.allowResize?alt?Selection.enableOnly():Selection.enableHandles():Selection.disableHandles();Tracker.setCursor(options.allowSelect?"crosshair":"default");Selection.setCursor(options.allowMove?"move":"default");$div.css("backgroundColor",options.bgColor);if("setSelect"in options){setSelect(opt.setSelect);Selection.done();delete options.setSelect}if("trueSize"in options){xscale=options.trueSize[0]/boundx;yscale=options.trueSize[1]/boundy}xlimit=options.maxSize[0]||
0;ylimit=options.maxSize[1]||0;xmin=options.minSize[0]||0;ymin=options.minSize[1]||0;if("outerImage"in options){$img.attr("src",options.outerImage);delete options.outerImage}Selection.refresh()}$hdl_holder.hide();interfaceUpdate(true);var api={animateTo:animateTo,setSelect:setSelect,setOptions:setOptionsNew,tellSelect:tellSelect,tellScaled:tellScaled,disable:disableCrop,enable:enableCrop,cancel:cancelCrop,focus:KeyManager.watchKeys,getBounds:function(){return[boundx*xscale,boundy*yscale]},getWidgetSize:function(){return[boundx,
boundy]},release:Selection.release,destroy:destroy};$origimg.data("Jcrop",api);return api};$.fn.Jcrop=function(options){function attachWhenDone(from){var loadsrc=options.useImg||from.src;var img=new Image;img.onload=function(){$.Jcrop(from,options)};img.src=loadsrc}if(typeof options!=="object")options={};this.each(function(){if($(this).data("Jcrop"))if(options=="api")return $(this).data("Jcrop");else $(this).data("Jcrop").setOptions(options);else attachWhenDone(this)});return this}})(jQuery);(function(){JSLINQ=window.JSLINQ=function(dataItems){return new JSLINQ.fn.init(dataItems)};JSLINQ.fn=JSLINQ.prototype={init:function(dataItems){this.items=dataItems},jslinq:"2.10",ToArray:function(){return this.items},Where:function(clause){var item;var newArray=new Array;for(var index=0;index<this.items.length;index++)if(clause(this.items[index],index))newArray[newArray.length]=this.items[index];return new JSLINQ(newArray)},Select:function(clause){var item;var newArray=new Array;for(var i=0;i<this.items.length;i++)if(clause(this.items[i]))newArray[newArray.length]=
clause(this.items[i]);return new JSLINQ(newArray)},OrderBy:function(clause){var tempArray=new Array;for(var i=0;i<this.items.length;i++)tempArray[tempArray.length]=this.items[i];return new JSLINQ(tempArray.sort(function(a,b){var x=clause(a);var y=clause(b);return x<y?-1:x>y?1:0}))},OrderByDescending:function(clause){var tempArray=new Array;for(var i=0;i<this.items.length;i++)tempArray[tempArray.length]=this.items[i];return new JSLINQ(tempArray.sort(function(a,b){var x=clause(b);var y=clause(a);return x<
y?-1:x>y?1:0}))},SelectMany:function(clause){var r=new Array;for(var i=0;i<this.items.length;i++)r=r.concat(clause(this.items[i]));return new JSLINQ(r)},Count:function(clause){if(clause==null)return this.items.length;else return this.Where(clause).items.length},Distinct:function(clause){var item;var dict=new Object;var retVal=new Array;for(var i=0;i<this.items.length;i++){item=clause(this.items[i]);if(dict[item]==null){dict[item]=true;retVal[retVal.length]=item}}dict=null;return new JSLINQ(retVal)},
Any:function(clause){for(var index=0;index<this.items.length;index++)if(clause(this.items[index],index))return true;return false},All:function(clause){for(var index=0;index<this.items.length;index++)if(!clause(this.items[index],index))return false;return true},Reverse:function(){var retVal=new Array;for(var index=this.items.length-1;index>-1;index--)retVal[retVal.length]=this.items[index];return new JSLINQ(retVal)},First:function(clause){if(clause!=null)return this.Where(clause).First();else if(this.items.length>
0)return this.items[0];else return null},Last:function(clause){if(clause!=null)return this.Where(clause).Last();else if(this.items.length>0)return this.items[this.items.length-1];else return null},ElementAt:function(index){return this.items[index]},Concat:function(array){var arr=array.items||array;return new JSLINQ(this.items.concat(arr))},Intersect:function(secondArray,clause){var clauseMethod;if(clause!=undefined)clauseMethod=clause;else clauseMethod=function(item,index,item2,index2){return item==
item2};var sa=secondArray.items||secondArray;var result=new Array;for(var a=0;a<this.items.length;a++)for(var b=0;b<sa.length;b++)if(clauseMethod(this.items[a],a,sa[b],b))result[result.length]=this.items[a];return new JSLINQ(result)},DefaultIfEmpty:function(defaultValue){if(this.items.length==0)return defaultValue;return this},ElementAtOrDefault:function(index,defaultValue){if(index>=0&&index<this.items.length)return this.items[index];return defaultValue},FirstOrDefault:function(defaultValue){return this.First()||
defaultValue},LastOrDefault:function(defaultValue){return this.Last()||defaultValue}};JSLINQ.fn.init.prototype=JSLINQ.fn})();if(!this.JSON)this.JSON={};
(function(){function l(b){return b<10?"0"+b:b}function o(b){p.lastIndex=0;return p.test(b)?'"'+b.replace(p,function(f){var c=r[f];return typeof c==="string"?c:"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function m(b,f){var c,d,g,j,i=h,e,a=f[b];if(a&&typeof a==="object"&&typeof a.toJSON==="function")a=a.toJSON(b);if(typeof k==="function")a=k.call(f,b,a);switch(typeof a){case "string":return o(a);case "number":return isFinite(a)?String(a):"null";case "boolean":case "null":return String(a);
case "object":if(!a)return"null";h+=n;e=[];if(Object.prototype.toString.apply(a)==="[object Array]"){j=a.length;for(c=0;c<j;c+=1)e[c]=m(c,a)||"null";g=e.length===0?"[]":h?"[\n"+h+e.join(",\n"+h)+"\n"+i+"]":"["+e.join(",")+"]";h=i;return g}if(k&&typeof k==="object"){j=k.length;for(c=0;c<j;c+=1){d=k[c];if(typeof d==="string")if(g=m(d,a))e.push(o(d)+(h?": ":":")+g)}}else for(d in a)if(Object.hasOwnProperty.call(a,d))if(g=m(d,a))e.push(o(d)+(h?": ":":")+g);g=e.length===0?"{}":h?"{\n"+h+e.join(",\n"+h)+
"\n"+i+"}":"{"+e.join(",")+"}";h=i;return g}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+l(this.getUTCMonth()+1)+"-"+l(this.getUTCDate())+"T"+l(this.getUTCHours())+":"+l(this.getUTCMinutes())+":"+l(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var q=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,n,r={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;if(typeof JSON.stringify!=="function")JSON.stringify=function(b,f,c){var d;n=h="";if(typeof c==="number")for(d=0;d<c;d+=1)n+=" ";else if(typeof c==="string")n=c;if((k=f)&&typeof f!=="function"&&(typeof f!=="object"||typeof f.length!=="number"))throw new Error("JSON.stringify");return m("",
{"":b})};if(typeof JSON.parse!=="function")JSON.parse=function(b,f){function c(g,j){var i,e,a=g[j];if(a&&typeof a==="object")for(i in a)if(Object.hasOwnProperty.call(a,i)){e=c(a,i);if(e!==undefined)a[i]=e;else delete a[i]}return f.call(g,j,a)}var d;b=String(b);q.lastIndex=0;if(q.test(b))b=b.replace(q,function(g){return"\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){d=eval("("+b+")");return typeof f==="function"?c({"":d},""):d}throw new SyntaxError("JSON.parse");}})();(function($){$.extend({tablesorter:new (function(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:".",debug:false};function benchmark(s,d){log(s+","+((new Date).getTime()-d.getTime())+
"ms")}this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined")console.log(s);else alert(s)}function buildParserCache(table,$headers){if(table.config.debug)var parsersDebug="";var rows=table.tBodies[0].rows;if(table.tBodies[0].rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&$($headers[i]).metadata()&&$($headers[i]).metadata().sorter)p=getParserById($($headers[i]).metadata().sorter);else if(table.config.headers[i]&&
table.config.headers[i].sorter)p=getParserById(table.config.headers[i].sorter);if(!p)p=detectParserForColumn(table,cells[i]);if(table.config.debug)parsersDebug+="column:"+i+" parser:"+p.id+"\n";list.push(p)}}if(table.config.debug)log(parsersDebug);return list}function detectParserForColumn(table,node){var l=parsers.length;for(var i=1;i<l;i++)if(parsers[i].is($.trim(getElementText(table.config,node)),table,node))return parsers[i];return parsers[0]}function getParserById(name){var l=parsers.length;
for(var i=0;i<l;i++)if(parsers[i].id.toLowerCase()==name.toLowerCase())return parsers[i];return false}function buildCache(table){if(table.config.debug)var cacheTime=new Date;var totalRows=table.tBodies[0]&&table.tBodies[0].rows.length||0,totalCells=table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=table.tBodies[0].rows[i],cols=[];cache.row.push($(c));for(var j=0;j<totalCells;++j)cols.push(parsers[j].format(getElementText(table.config,
c.cells[j]),table,c.cells[j]));cols.push(i);cache.normalized.push(cols);cols=null}if(table.config.debug)benchmark("Building cache for "+totalRows+" rows:",cacheTime);return cache}function getElementText(config,node){if(!node)return"";var t="";if(config.textExtraction=="simple")if(node.childNodes[0]&&node.childNodes[0].hasChildNodes())t=node.childNodes[0].innerHTML;else t=node.innerHTML;else if(typeof config.textExtraction=="function")t=config.textExtraction(node);else t=$(node).text();return t}function appendToTable(table,
cache){if(table.config.debug)var appendTime=new Date;var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=n[0].length-1,tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){rows.push(r[n[i][checkCell]]);if(!table.config.appender){var o=r[n[i][checkCell]];var l=o.length;for(var j=0;j<l;j++)tableBody[0].appendChild(o[j])}}if(table.config.appender)table.config.appender(table,rows);rows=null;if(table.config.debug)benchmark("Rebuilt table:",appendTime);applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd")},
0)}function buildHeaders(table){if(table.config.debug)var time=new Date;var meta=$.metadata?true:false,tableHeadersRows=[];for(var i=0;i<table.tHead.rows.length;i++)tableHeadersRows[i]=0;$tableHeaders=$("thead th",table);$tableHeaders.each(function(index){this.count=0;this.column=index;this.order=formatSortingOrder(table.config.sortInitialOrder);if(checkHeaderMetadata(this)||checkHeaderOptions(table,index))this.sortDisabled=true;if(!this.sortDisabled)$(this).addClass(table.config.cssHeader);table.config.headerList[index]=
this});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders)}return $tableHeaders}function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1)arr=arr.concat(checkCellColSpan(table,headerArr,row++));else if(table.tHead.length==1||cell.rowSpan>1||!r[row+1])arr.push(cell)}return arr}function checkHeaderMetadata(cell){if($.metadata&&$(cell).metadata().sorter===false)return true;return false}function checkHeaderOptions(table,
i){if(table.config.headers[i]&&table.config.headers[i].sorter===false)return true;return false}function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++)getWidgetById(c[i]).format(table)}function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++)if(widgets[i].id.toLowerCase()==name.toLowerCase())return widgets[i]}function formatSortingOrder(v){if(typeof v!="Number")i=v.toLowerCase()=="desc"?1:0;else i=v==(0||1)?v:0;return i}function isValueInArray(v,a){var l=
a.length;for(var i=0;i<l;i++)if(a[i][0]==v)return true;return false}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled)h[this.column]=$(this)});var l=list.length;for(var i=0;i<l;i++)h[list[i][0]].addClass(css[list[i][1]])}function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$("<colgroup>");$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($("<col>").css("width",
$(this).width()))});$(table).prepend(colgroup)}}function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++}}function multisort(table,sortList,cache){if(table.config.debug)var sortTime=new Date;var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=getCachedSortType(table.config.parsers,c)=="text"?order==0?
"sortText":"sortTextDesc":order==0?"sortNumeric":"sortNumericDesc";var e="e"+i;dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ";dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++)dynamicExp+="}; ";dynamicExp+="return 0; ";dynamicExp+="}; ";eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug)benchmark("Sorting on "+sortList.toString()+
" and dir "+order+" time:",sortTime);return cache}function sortText(a,b){return a<b?-1:a>b?1:0}function sortTextDesc(a,b){return b<a?-1:b>a?1:0}function sortNumeric(a,b){return a-b}function sortNumericDesc(a,b){return b-a}function getCachedSortType(parsers,i){return parsers[i].type}this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies)return;var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,
settings);$this=$(this);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){$this.trigger("sortStart");var totalRows=$this[0].tBodies[0]&&$this[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&totalRows>0){var $cell=$(this);var i=this.column;this.order=this.count++%2;if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;
for(var j=0;j<a.length;j++)if(a[j][0]!=i)config.sortList.push(a[j])}config.sortList.push([i,this.order])}else if(isValueInArray(i,config.sortList))for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2}}else config.sortList.push([i,this.order]);setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache))},1);return false}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=
function(){return false};return false}});$this.bind("update",function(){this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this)}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache))}).bind("appendCache",function(){appendToTable(this,cache)}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this)}).bind("applyWidgets",
function(){applyWidget(this)});if($.metadata&&$(this).metadata()&&$(this).metadata().sortlist)config.sortList=$(this).metadata().sortlist;if(config.sortList.length>0)$this.trigger("sorton",[config.sortList]);applyWidget(this)})};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++)if(parsers[i].id.toLowerCase()==parser.id.toLowerCase())a=false;if(a)parsers.push(parser)};this.addWidget=function(widget){widgets.push(widget)};this.formatFloat=function(s){var i=parseFloat(s);
return isNaN(i)?0:i};this.formatInt=function(s){var i=parseInt(s);return isNaN(i)?0:i};this.isDigit=function(s,config){var DECIMAL="\\"+config.decimal;var exp="/(^[+]?0("+DECIMAL+"0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)"+DECIMAL+"(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*"+DECIMAL+"0+$)/";return RegExp(exp).test($.trim(s))};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild)this.removeChild(this.firstChild)}empty.apply(table.tBodies[0])}else table.tBodies[0].innerHTML=
""}})});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true},format:function(s){return $.trim(s.toLowerCase())},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c)},format:function(s){return $.tablesorter.formatFloat(s)},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[\u00a3$\u20ac?.]/.test(s)},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g),
""))},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s)},format:function(s){var a=s.split("."),r="",l=a.length;for(var i=0;i<l;i++){var item=a[i];if(item.length==2)r+="0"+item;else r+=item}return $.tablesorter.formatFloat(r)},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s)},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});ts.addParser({id:"isoDate",
is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s)},format:function(s){return $.tablesorter.formatFloat(s!=""?(new Date(s.replace(new RegExp(/-/g),"/"))).getTime():"0")},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s))},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""))},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},
format:function(s){return $.tablesorter.formatFloat((new Date(s)).getTime())},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s)},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us")s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");else if(c.dateFormat=="uk")s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");else if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy")s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,
"$1/$2/$3");return $.tablesorter.formatFloat((new Date(s)).getTime())},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s)},format:function(s){return $.tablesorter.formatFloat((new Date("2000/01/01 "+s)).getTime())},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false},format:function(s,table,cell){var c=table.config,p=!c.parserMetadataName?"sortValue":c.parserMetadataName;return $(cell).metadata()[p]},
type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug)var time=new Date;$("tr:visible",table.tBodies[0]).filter(":even").removeClass(table.config.widgetZebra.css[1]).addClass(table.config.widgetZebra.css[0]).end().filter(":odd").removeClass(table.config.widgetZebra.css[0]).addClass(table.config.widgetZebra.css[1]);if(table.config.debug)$.tablesorter.benchmark("Applying Zebra widget",time)}})})(jQuery);var $buo=function(op,test){var jsv=5;var n=window.navigator,b;this.op=op||{};this.op.l=op.l||n["language"]||n["userLanguage"]||document.documentElement.getAttribute("lang")||"en";this.op.vsakt={i:8,f:3.6,o:10.1,s:4,n:10};this.op.vsdefault={i:6,f:2,o:9.64,s:3,n:10};this.op.vs=op.vs||this.op.vsdefault;for(b in this.op.vsakt)if(this.op.vs[b]>=this.op.vsakt[b])this.op.vs[b]=this.op.vsdefault[b];this.op.reminder=op.reminder||24;if(op.reminder==0)this.op.reminder=0;this.op.onshow=op.onshow||function(o){};
this.op.url=op.url||"http://browser-update.org/update.html";this.op.pageurl=op.pageurl||window.location.hostname||"unknown";this.op.newwindow=op.newwindow||false;this.op.test=test||op.test||false;if(window.location.hash=="#test-bu")this.op.test=true;if(op.new7||this.op.l=="de"&&!this.op.test&&Math.round(Math.random()*3)==1){var e=document.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute("src","http://browser-update.org/update7.js");document.body.appendChild(e);return}function getBrowser(){var n,
v,t,ua=navigator.userAgent;var names={i:"Internet Explorer",f:"Firefox",o:"Opera",s:"Apple Safari",n:"Netscape Navigator",c:"Chrome",x:"Other"};if(/MSIE (\d+\.\d+);/.test(ua))n="i";else if(/like firefox|seamonkey|opera mini|meego|moblin|maemo|arora|camino|flot|k-meleon|fennec|kazehakase|galeon|android|mobile|iphone|ipod|ipad|symbian/i.test(ua))n="x";else if(/Chrome.(\d+\.\d+)/i.test(ua))n="c";else if(/Firefox.(\d+\.\d+)/i.test(ua))n="f";else if(/Version.(\d+.\d+).{0,10}Safari/i.test(ua))n="s";else if(/Safari.(\d+)/i.test(ua))n=
"so";else if(/Opera.*Version.(\d+\.\d+)/i.test(ua))n="o";else if(/Opera.(\d+\.\d+)/i.test(ua))n="o";else if(/Netscape.(\d+)/i.test(ua))n="n";else return{n:"x",v:0,t:names[n]};v=new Number(RegExp.$1);if(n=="so"){v=v<100&&1||v<130&&1.2||v<320&&1.3||v<520&&2||v<524&&3||v<526&&3.2||4;n="s"}if(n=="i"&&v==7&&window.XDomainRequest)v=8;return{n:n,v:v,t:names[n]+" "+v}}this.op.browser=getBrowser();if(!this.op.test&&(!this.op.browser||!this.op.browser.n||this.op.browser.n=="x"||this.op.browser.n=="c"||document.cookie.indexOf("browserupdateorg=pause")>
-1||this.op.browser.v>this.op.vs[this.op.browser.n]))return;if(!this.op.test){var i=new Image;i.src="http://browser-update.org/viewcount.php?n="+this.op.browser.n+"&v="+this.op.browser.v+"&p="+escape(this.op.pageurl)+"&jsv="+jsv}if(this.op.reminder>0){var d=new Date((new Date).getTime()+1E3*3600*this.op.reminder);document.cookie="browserupdateorg=pause; expires="+d.toGMTString()+"; path=/"}var ll=this.op.l.substr(0,2);var languages="de,en";if(languages.indexOf(ll)!==false)this.op.url="http://browser-update.org/"+
ll+"/update.html#"+jsv;var tar="";if(this.op.newwindow)tar=' target="_blank"';function busprintf(){var args=arguments;var data=args[0];for(var k=1;k<args.length;++k)data=data.replace(/%s/,args[k]);return data}var t="Your browser (%s) is <b>out of date</b>. It has known <b>security flaws</b> and may <b>not display all features</b> of this and other websites.          <a%s>Learn how to update your browser</a>";if(ll=="de")t="Sie verwenden einen <b>veralteten Browser</b> (%s) mit <b>Sicherheitsschwachstellen</b> und <b>k&ouml;nnen nicht alle Funktionen dieser Webseite nutzen</b>.         <a%s>Hier erfahren Sie, wie einfach Sie Ihren Browser aktualisieren k&ouml;nnen</a>.";
else if(ll=="it")t="Il tuo browser (%s) <b>non \u00c3\u00a8 aggiornato</b>. Ha delle <b>falle di sicurezza</b> e potrebbe <b>non visualizzare correttamente</b> le         pagine di questo e altri siti.         <a%s>Aggiorna il tuo browser</a>!";else if(ll=="pl")t="Przegl\u00c4\u2026darka (%s), kt\u00c3\u00b3rej u\u00c5\u00bcywasz, jest przestarza\u00c5\u201aa. Posiada ona udokumentowane <b>luki bezpiecze\u00c5\u201estwa, inne wady</b> oraz <b>ograniczon\u00c4\u2026 funkcjonalno\u00c5\u203a\u00c4\u2021</b>. Tracisz mo\u00c5\u00bcliwo\u00c5\u203a\u00c4\u2021 skorzystania z pe\u00c5\u201ani mo\u00c5\u00bcliwo\u00c5\u203aci oferowanych przez niekt\u00c3\u00b3re strony internetowe. <a%s>Dowiedz si\u00c4\u2122 jak zaktualizowa\u00c4\u2021 swoj\u00c4\u2026 przegl\u00c4\u2026dark\u00c4\u2122</a>.";
else if(ll=="es")t="Tu navegador (%s) est\u00c3\u00a1 <b>desactualizado</b>. Tiene conocidas <b>fallas de seguridad</b> y podr\u00c3a <b>no mostrar todas las caracter\u00c3sticas</b> de este y otros sitios web. <a%s>Apr\u00c3\u00a9nde c\u00c3\u00b3mo puedes actualizar tu navegador</a>";else if(ll=="nl")t="Uw browser (%s) is <b>oud</b>. Het heeft bekende <b>veiligheidsissues</b> en kan <b>niet alle mogelijkheden</b> weergeven van deze of andere websites. <a%s>Lees meer over hoe uw browser te upgraden</a>";
else if(ll=="pt")t="Seu navegador (%s) est\u00c3\u00a1 <b>desatualizado</b>. Ele possui <b>falhas de seguran\u00c3\u00a7a</b> e pode <b>apresentar problemas</b> para exibir este e outros websites. <a%s>Veja como atualizar o seu navegador</a>";if(op.text)t=op.text;this.op.text=busprintf(t,this.op.browser.t,' href="'+this.op.url+'"'+tar);var div=document.createElement("div");this.op.div=div;div.id="buorg";div.className="buorg";div.innerHTML="<div>"+this.op.text+'<div id="buorgclose">X</div></div>';
var sheet=document.createElement("style");var style=".buorg {position:absolute;z-index:111111;width:100%; top:0px; left:0px; border-bottom:1px solid #A29330; background:#FDF2AB no-repeat 10px center url(http://browser-update.org/img/dialog-warning.gif);text-align:left; cursor:pointer; font-family: Arial,Helvetica,sans-serif; color:#000; font-size: 12px;}.buorg div { padding:5px 36px 5px 40px; } .buorg a,.buorg a:visited  {color:#E25600; text-decoration: underline;}#buorgclose { position: absolute; right: .5em; top:.2em; height: 20px; width: 12px; font-weight: bold;font-size:14px; padding:0; }";
document.body.insertBefore(div,document.body.firstChild);document.getElementsByTagName("head")[0].appendChild(sheet);try{sheet.innerText=style;sheet.innerHTML=style}catch(e){try{sheet.styleSheet.cssText=style}catch(e){return}}var me=this;div.onclick=function(){if(me.op.newwindow)window.open(me.op.url,"_blank");else window.location.href=me.op.url;return false};div.getElementsByTagName("a")[0].onclick=function(e){var e=e||window.event;if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true;
return true};this.op.bodymt=document.body.style.marginTop;document.body.style.marginTop=div.clientHeight+"px";document.getElementById("buorgclose").onclick=function(e){var e=e||window.event;if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true;me.op.div.style.display="none";document.body.style.marginTop=me.op.bodymt;return true};op.onshow(this.op)};var $buoop=$buoop||{};$bu=$buo($buoop);jQuery(function($){$.datepicker.regional["pt-BR"]={closeText:"Fechar",prevText:"&#x3c;Anterior",nextText:"Pr&oacute;ximo&#x3e;",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Mar&ccedil;o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Ter&ccedil;a-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sabado"],dayNamesShort:["Dom",
"Seg","Ter","Qua","Qui","Sex","Sab"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],dateFormat:"dd/mm/yy",firstDay:0,isRTL:false};$.datepicker.setDefaults($.datepicker.regional["pt-BR"])});jQuery.tableDnD={currentTable:null,dragObject:null,mouseOffset:null,oldY:0,build:function(options){this.each(function(){this.tableDnDConfig=jQuery.extend({onDragStyle:null,onDropStyle:null,onDragClass:"tDnD_whileDrag",onDrop:null,onDragStart:null,scrollAmount:5,serializeRegexp:/[^\-]*$/,serializeParamName:null,dragHandle:null},options||{});jQuery.tableDnD.makeDraggable(this)});jQuery(document).bind("mousemove",jQuery.tableDnD.mousemove).bind("mouseup",jQuery.tableDnD.mouseup);return this},makeDraggable:function(table){var config=
table.tableDnDConfig;if(table.tableDnDConfig.dragHandle){var cells=jQuery("td."+table.tableDnDConfig.dragHandle,table);cells.each(function(){jQuery(this).mousedown(function(ev){jQuery.tableDnD.dragObject=this.parentNode;jQuery.tableDnD.currentTable=table;jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(this,ev);if(config.onDragStart)config.onDragStart(table,this);return false})})}else{var rows=jQuery("tr",table);rows.each(function(){var row=jQuery(this);if(!row.hasClass("nodrag"))row.mousedown(function(ev){if(ev.target.tagName==
"TD"){jQuery.tableDnD.dragObject=this;jQuery.tableDnD.currentTable=table;jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(this,ev);if(config.onDragStart)config.onDragStart(table,this);return false}}).css("cursor","move")})}},updateTables:function(){this.each(function(){if(this.tableDnDConfig)jQuery.tableDnD.makeDraggable(this)})},mouseCoords:function(ev){if(ev.pageX||ev.pageY)return{x:ev.pageX,y:ev.pageY};return{x:ev.clientX+document.body.scrollLeft-document.body.clientLeft,y:ev.clientY+
document.body.scrollTop-document.body.clientTop}},getMouseOffset:function(target,ev){ev=ev||window.event;var docPos=this.getPosition(target);var mousePos=this.mouseCoords(ev);return{x:mousePos.x-docPos.x,y:mousePos.y-docPos.y}},getPosition:function(e){var left=0;var top=0;if(e.offsetHeight==0)e=e.firstChild;while(e.offsetParent){left+=e.offsetLeft;top+=e.offsetTop;e=e.offsetParent}left+=e.offsetLeft;top+=e.offsetTop;return{x:left,y:top}},mousemove:function(ev){if(jQuery.tableDnD.dragObject==null)return;
var dragObj=jQuery(jQuery.tableDnD.dragObject);var config=jQuery.tableDnD.currentTable.tableDnDConfig;var mousePos=jQuery.tableDnD.mouseCoords(ev);var y=mousePos.y-jQuery.tableDnD.mouseOffset.y;var yOffset=window.pageYOffset;if(document.all)if(typeof document.compatMode!="undefined"&&document.compatMode!="BackCompat")yOffset=document.documentElement.scrollTop;else if(typeof document.body!="undefined")yOffset=document.body.scrollTop;if(mousePos.y-yOffset<config.scrollAmount)window.scrollBy(0,-config.scrollAmount);
else{var windowHeight=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight;if(windowHeight-(mousePos.y-yOffset)<config.scrollAmount)window.scrollBy(0,config.scrollAmount)}if(y!=jQuery.tableDnD.oldY){var movingDown=y>jQuery.tableDnD.oldY;jQuery.tableDnD.oldY=y;if(config.onDragClass)dragObj.addClass(config.onDragClass);else dragObj.css(config.onDragStyle);var currentRow=jQuery.tableDnD.findDropTargetRow(dragObj,
y);if(currentRow)if(movingDown&&jQuery.tableDnD.dragObject!=currentRow)jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,currentRow.nextSibling);else if(!movingDown&&jQuery.tableDnD.dragObject!=currentRow)jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,currentRow)}return false},findDropTargetRow:function(draggedRow,y){var rows=jQuery.tableDnD.currentTable.rows;for(var i=0;i<rows.length;i++){var row=rows[i];var rowY=this.getPosition(row).y;
var rowHeight=parseInt(row.offsetHeight)/2;if(row.offsetHeight==0){rowY=this.getPosition(row.firstChild).y;rowHeight=parseInt(row.firstChild.offsetHeight)/2}if(y>rowY-rowHeight&&y<rowY+rowHeight){if(row==draggedRow)return null;var config=jQuery.tableDnD.currentTable.tableDnDConfig;if(config.onAllowDrop)if(config.onAllowDrop(draggedRow,row))return row;else return null;else{var nodrop=jQuery(row).hasClass("nodrop");if(!nodrop)return row;else return null}return row}}return null},mouseup:function(e){if(jQuery.tableDnD.currentTable&&
jQuery.tableDnD.dragObject){var droppedRow=jQuery.tableDnD.dragObject;var config=jQuery.tableDnD.currentTable.tableDnDConfig;if(config.onDragClass)jQuery(droppedRow).removeClass(config.onDragClass);else jQuery(droppedRow).css(config.onDropStyle);jQuery.tableDnD.dragObject=null;if(config.onDrop)config.onDrop(jQuery.tableDnD.currentTable,droppedRow);jQuery.tableDnD.currentTable=null}},serialize:function(){if(jQuery.tableDnD.currentTable)return jQuery.tableDnD.serializeTable(jQuery.tableDnD.currentTable);
else return"Error: No Table id set, you need to set an id on your table and every row"},serializeTable:function(table){var result="";var tableId=table.id;var rows=table.rows;for(var i=0;i<rows.length;i++){if(result.length>0)result+="&";var rowId=rows[i].id;if(rowId&&rowId&&table.tableDnDConfig&&table.tableDnDConfig.serializeRegexp)rowId=rowId.match(table.tableDnDConfig.serializeRegexp)[0];result+=tableId+"[]="+rowId}return result},serializeTables:function(){var result="";this.each(function(){result+=
jQuery.tableDnD.serializeTable(this)});return result}};jQuery.fn.extend({tableDnD:jQuery.tableDnD.build,tableDnDUpdate:jQuery.tableDnD.updateTables,tableDnDSerialize:jQuery.tableDnD.serializeTables});(function(){jQuery.color={};jQuery.color.make=function(G,H,J,I){var A={};A.r=G||0;A.g=H||0;A.b=J||0;A.a=I!=null?I:1;A.add=function(C,D){for(var E=0;E<C.length;++E)A[C.charAt(E)]+=D;return A.normalize()};A.scale=function(C,D){for(var E=0;E<C.length;++E)A[C.charAt(E)]*=D;return A.normalize()};A.toString=function(){if(A.a>=1)return"rgb("+[A.r,A.g,A.b].join(",")+")";else return"rgba("+[A.r,A.g,A.b,A.a].join(",")+")"};A.normalize=function(){function C(E,D,F){return D<E?E:D>F?F:D}A.r=C(0,parseInt(A.r),
255);A.g=C(0,parseInt(A.g),255);A.b=C(0,parseInt(A.b),255);A.a=C(0,A.a,1);return A};A.clone=function(){return jQuery.color.make(A.r,A.b,A.g,A.a)};return A.normalize()};jQuery.color.extract=function(E,F){var A;do{A=E.css(F).toLowerCase();if(A!=""&&A!="transparent")break;E=E.parent()}while(!jQuery.nodeName(E.get(0),"body"));if(A=="rgba(0, 0, 0, 0)")A="transparent";return jQuery.color.parse(A)};jQuery.color.parse=function(A){var F,H=jQuery.color.make;if(F=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(A))return H(parseInt(F[1],
10),parseInt(F[2],10),parseInt(F[3],10));if(F=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(A))return H(parseInt(F[1],10),parseInt(F[2],10),parseInt(F[3],10),parseFloat(F[4]));if(F=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(A))return H(parseFloat(F[1])*2.55,parseFloat(F[2])*2.55,parseFloat(F[3])*2.55);if(F=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(A))return H(parseFloat(F[1])*
2.55,parseFloat(F[2])*2.55,parseFloat(F[3])*2.55,parseFloat(F[4]));if(F=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(A))return H(parseInt(F[1],16),parseInt(F[2],16),parseInt(F[3],16));if(F=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(A))return H(parseInt(F[1]+F[1],16),parseInt(F[2]+F[2],16),parseInt(F[3]+F[3],16));var G=jQuery.trim(A).toLowerCase();if(G=="transparent")return H(255,255,255,0);else{F=B[G];return H(F[0],F[1],F[2])}};var B={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})();
(function(C){function B(l,W,X,E){var O=[],g={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{mode:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,
twelveHourClock:false},yaxis:{autoscaleMargin:0.02},x2axis:{autoscaleMargin:null},y2axis:{autoscaleMargin:0.02},series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false},shadowSize:3},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,tickColor:"rgba(0,0,0,0.15)",labelMargin:5,borderWidth:2,borderColor:null,
markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},hooks:{}},P=null,AC=null,AD=null,Y=null,AJ=null,s={xaxis:{},yaxis:{},x2axis:{},y2axis:{}},e={left:0,right:0,top:0,bottom:0},y=0,Q=0,I=0,t=0,L={processOptions:[],processRawData:[],processDatapoints:[],draw:[],bindEvents:[],drawOverlay:[]},G=this;G.setData=f;G.setupGrid=k;G.draw=AH;G.getPlaceholder=function(){return l};G.getCanvas=function(){return P};G.getPlotOffset=function(){return e};
G.width=function(){return I};G.height=function(){return t};G.offset=function(){var AK=AD.offset();AK.left+=e.left;AK.top+=e.top;return AK};G.getData=function(){return O};G.getAxes=function(){return s};G.getOptions=function(){return g};G.highlight=AE;G.unhighlight=x;G.triggerRedrawOverlay=q;G.pointOffset=function(AK){return{left:parseInt(T(AK,"xaxis").p2c(+AK.x)+e.left),top:parseInt(T(AK,"yaxis").p2c(+AK.y)+e.top)}};G.hooks=L;b(G);r(X);c();f(W);k();AH();AG();function Z(AM,AK){AK=[G].concat(AK);for(var AL=
0;AL<AM.length;++AL)AM[AL].apply(this,AK)}function b(){for(var AK=0;AK<E.length;++AK){var AL=E[AK];AL.init(G);if(AL.options)C.extend(true,g,AL.options)}}function r(AK){C.extend(true,g,AK);if(g.grid.borderColor==null)g.grid.borderColor=g.grid.color;if(g.xaxis.noTicks&&g.xaxis.ticks==null)g.xaxis.ticks=g.xaxis.noTicks;if(g.yaxis.noTicks&&g.yaxis.ticks==null)g.yaxis.ticks=g.yaxis.noTicks;if(g.grid.coloredAreas)g.grid.markings=g.grid.coloredAreas;if(g.grid.coloredAreasColor)g.grid.markingsColor=g.grid.coloredAreasColor;
if(g.lines)C.extend(true,g.series.lines,g.lines);if(g.points)C.extend(true,g.series.points,g.points);if(g.bars)C.extend(true,g.series.bars,g.bars);if(g.shadowSize)g.series.shadowSize=g.shadowSize;for(var AL in L)if(g.hooks[AL]&&g.hooks[AL].length)L[AL]=L[AL].concat(g.hooks[AL]);Z(L.processOptions,[g])}function f(AK){O=M(AK);U();m()}function M(AN){var AL=[];for(var AK=0;AK<AN.length;++AK){var AM=C.extend(true,{},g.series);if(AN[AK].data){AM.data=AN[AK].data;delete AN[AK].data;C.extend(true,AM,AN[AK]);
AN[AK].data=AM.data}else AM.data=AN[AK];AL.push(AM)}return AL}function T(AM,AK){var AL=AM[AK];if(!AL||AL==1)return s[AK];if(typeof AL=="number")return s[AK.charAt(0)+AL+AK.slice(1)];return AL}function U(){var AP;var AV=O.length,AK=[],AN=[];for(AP=0;AP<O.length;++AP){var AS=O[AP].color;if(AS!=null){--AV;if(typeof AS=="number")AN.push(AS);else AK.push(C.color.parse(O[AP].color))}}for(AP=0;AP<AN.length;++AP)AV=Math.max(AV,AN[AP]+1);var AL=[],AO=0;AP=0;while(AL.length<AV){var AR;if(g.colors.length==AP)AR=
C.color.make(100,100,100);else AR=C.color.parse(g.colors[AP]);var AM=AO%2==1?-1:1;AR.scale("rgb",1+AM*Math.ceil(AO/2)*0.2);AL.push(AR);++AP;if(AP>=g.colors.length){AP=0;++AO}}var AQ=0,AW;for(AP=0;AP<O.length;++AP){AW=O[AP];if(AW.color==null){AW.color=AL[AQ].toString();++AQ}else if(typeof AW.color=="number")AW.color=AL[AW.color].toString();if(AW.lines.show==null){var AU,AT=true;for(AU in AW)if(AW[AU].show){AT=false;break}if(AT)AW.lines.show=true}AW.xaxis=T(AW,"xaxis");AW.yaxis=T(AW,"yaxis")}}function m(){var AW=
Number.POSITIVE_INFINITY,AQ=Number.NEGATIVE_INFINITY,Ac,Aa,AZ,AV,AL,AR,Ab,AX,AP,AO,AK,Ai,Af,AT;for(AK in s){s[AK].datamin=AW;s[AK].datamax=AQ;s[AK].used=false}function AN(Al,Ak,Aj){if(Ak<Al.datamin)Al.datamin=Ak;if(Aj>Al.datamax)Al.datamax=Aj}for(Ac=0;Ac<O.length;++Ac){AR=O[Ac];AR.datapoints={points:[]};Z(L.processRawData,[AR,AR.data,AR.datapoints])}for(Ac=0;Ac<O.length;++Ac){AR=O[Ac];var Ah=AR.data,Ae=AR.datapoints.format;if(!Ae){Ae=[];Ae.push({x:true,number:true,required:true});Ae.push({y:true,
number:true,required:true});if(AR.bars.show)Ae.push({y:true,number:true,required:false,defaultValue:0});AR.datapoints.format=Ae}if(AR.datapoints.pointsize!=null)continue;if(AR.datapoints.pointsize==null)AR.datapoints.pointsize=Ae.length;AX=AR.datapoints.pointsize;Ab=AR.datapoints.points;insertSteps=AR.lines.show&&AR.lines.steps;AR.xaxis.used=AR.yaxis.used=true;for(Aa=AZ=0;Aa<Ah.length;++Aa,AZ+=AX){AT=Ah[Aa];var AM=AT==null;if(!AM)for(AV=0;AV<AX;++AV){Ai=AT[AV];Af=Ae[AV];if(Af){if(Af.number&&Ai!=null){Ai=
+Ai;if(isNaN(Ai))Ai=null}if(Ai==null){if(Af.required)AM=true;if(Af.defaultValue!=null)Ai=Af.defaultValue}}Ab[AZ+AV]=Ai}if(AM)for(AV=0;AV<AX;++AV){Ai=Ab[AZ+AV];if(Ai!=null){Af=Ae[AV];if(Af.x)AN(AR.xaxis,Ai,Ai);if(Af.y)AN(AR.yaxis,Ai,Ai)}Ab[AZ+AV]=null}else if(insertSteps&&AZ>0&&Ab[AZ-AX]!=null&&Ab[AZ-AX]!=Ab[AZ]&&Ab[AZ-AX+1]!=Ab[AZ+1]){for(AV=0;AV<AX;++AV)Ab[AZ+AX+AV]=Ab[AZ+AV];Ab[AZ+1]=Ab[AZ-AX+1];AZ+=AX}}}for(Ac=0;Ac<O.length;++Ac){AR=O[Ac];Z(L.processDatapoints,[AR,AR.datapoints])}for(Ac=0;Ac<O.length;++Ac){AR=
O[Ac];Ab=AR.datapoints.points,AX=AR.datapoints.pointsize;var AS=AW,AY=AW,AU=AQ,Ad=AQ;for(Aa=0;Aa<Ab.length;Aa+=AX){if(Ab[Aa]==null)continue;for(AV=0;AV<AX;++AV){Ai=Ab[Aa+AV];Af=Ae[AV];if(!Af)continue;if(Af.x){if(Ai<AS)AS=Ai;if(Ai>AU)AU=Ai}if(Af.y){if(Ai<AY)AY=Ai;if(Ai>Ad)Ad=Ai}}}if(AR.bars.show){var Ag=AR.bars.align=="left"?0:-AR.bars.barWidth/2;if(AR.bars.horizontal){AY+=Ag;Ad+=Ag+AR.bars.barWidth}else{AS+=Ag;AU+=Ag+AR.bars.barWidth}}AN(AR.xaxis,AS,AU);AN(AR.yaxis,AY,Ad)}for(AK in s){if(s[AK].datamin==
AW)s[AK].datamin=null;if(s[AK].datamax==AQ)s[AK].datamax=null}}function c(){function AK(AM,AL){var AN=document.createElement("canvas");AN.width=AM;AN.height=AL;if(C.browser.msie)AN=window.G_vmlCanvasManager.initElement(AN);return AN}y=l.width();Q=l.height();l.html("");if(l.css("position")=="static")l.css("position","relative");if(y<=0||Q<=0)throw"Invalid dimensions for plot, width = "+y+", height = "+Q;if(C.browser.msie)window.G_vmlCanvasManager.init_(document);P=C(AK(y,Q)).appendTo(l).get(0);Y=P.getContext("2d");
AC=C(AK(y,Q)).css({position:"absolute",left:0,top:0}).appendTo(l).get(0);AJ=AC.getContext("2d");AJ.stroke()}function AG(){AD=C([AC,P]);if(g.grid.hoverable)AD.mousemove(D);if(g.grid.clickable)AD.click(d);Z(L.bindEvents,[AD])}function k(){function AL(AT,AU){function AP(AV){return AV}var AS,AO,AQ=AU.transform||AP,AR=AU.inverseTransform;if(AT==s.xaxis||AT==s.x2axis){AS=AT.scale=I/(AQ(AT.max)-AQ(AT.min));AO=AQ(AT.min);if(AQ==AP)AT.p2c=function(AV){return(AV-AO)*AS};else AT.p2c=function(AV){return(AQ(AV)-
AO)*AS};if(!AR)AT.c2p=function(AV){return AO+AV/AS};else AT.c2p=function(AV){return AR(AO+AV/AS)}}else{AS=AT.scale=t/(AQ(AT.max)-AQ(AT.min));AO=AQ(AT.max);if(AQ==AP)AT.p2c=function(AV){return(AO-AV)*AS};else AT.p2c=function(AV){return(AO-AQ(AV))*AS};if(!AR)AT.c2p=function(AV){return AO-AV/AS};else AT.c2p=function(AV){return AR(AO-AV/AS)}}}function AN(AR,AT){var AQ,AS=[],AP;AR.labelWidth=AT.labelWidth;AR.labelHeight=AT.labelHeight;if(AR==s.xaxis||AR==s.x2axis){if(AR.labelWidth==null)AR.labelWidth=
y/(AR.ticks.length>0?AR.ticks.length:1);if(AR.labelHeight==null){AS=[];for(AQ=0;AQ<AR.ticks.length;++AQ){AP=AR.ticks[AQ].label;if(AP)AS.push('<div class="tickLabel" style="float:left;width:'+AR.labelWidth+'px">'+AP+"</div>")}if(AS.length>0){var AO=C('<div style="position:absolute;top:-10000px;width:10000px;font-size:smaller">'+AS.join("")+'<div style="clear:left"></div></div>').appendTo(l);AR.labelHeight=AO.height();AO.remove()}}}else if(AR.labelWidth==null||AR.labelHeight==null){for(AQ=0;AQ<AR.ticks.length;++AQ){AP=
AR.ticks[AQ].label;if(AP)AS.push('<div class="tickLabel">'+AP+"</div>")}if(AS.length>0){var AO=C('<div style="position:absolute;top:-10000px;font-size:smaller">'+AS.join("")+"</div>").appendTo(l);if(AR.labelWidth==null)AR.labelWidth=AO.width();if(AR.labelHeight==null)AR.labelHeight=AO.find("div").height();AO.remove()}}if(AR.labelWidth==null)AR.labelWidth=0;if(AR.labelHeight==null)AR.labelHeight=0}function AM(){var AP=g.grid.borderWidth;for(i=0;i<O.length;++i)AP=Math.max(AP,2*(O[i].points.radius+O[i].points.lineWidth/
2));e.left=e.right=e.top=e.bottom=AP;var AO=g.grid.labelMargin+g.grid.borderWidth;if(s.xaxis.labelHeight>0)e.bottom=Math.max(AP,s.xaxis.labelHeight+AO);if(s.yaxis.labelWidth>0)e.left=Math.max(AP,s.yaxis.labelWidth+AO);if(s.x2axis.labelHeight>0)e.top=Math.max(AP,s.x2axis.labelHeight+AO);if(s.y2axis.labelWidth>0)e.right=Math.max(AP,s.y2axis.labelWidth+AO);I=y-e.left-e.right;t=Q-e.bottom-e.top}var AK;for(AK in s)K(s[AK],g[AK]);if(g.grid.show){for(AK in s){F(s[AK],g[AK]);p(s[AK],g[AK]);AN(s[AK],g[AK])}AM()}else{e.left=
e.right=e.top=e.bottom=0;I=y;t=Q}for(AK in s)AL(s[AK],g[AK]);if(g.grid.show)h();AI()}function K(AN,AQ){var AM=+(AQ.min!=null?AQ.min:AN.datamin),AK=+(AQ.max!=null?AQ.max:AN.datamax),AP=AK-AM;if(AP==0){var AL=AK==0?1:0.01;if(AQ.min==null)AM-=AL;if(AQ.max==null||AQ.min!=null)AK+=AL}else{var AO=AQ.autoscaleMargin;if(AO!=null){if(AQ.min==null){AM-=AP*AO;if(AM<0&&AN.datamin!=null&&AN.datamin>=0)AM=0}if(AQ.max==null){AK+=AP*AO;if(AK>0&&AN.datamax!=null&&AN.datamax<=0)AK=0}}}AN.min=AM;AN.max=AK}function F(AP,
AS){var AO;if(typeof AS.ticks=="number"&&AS.ticks>0)AO=AS.ticks;else if(AP==s.xaxis||AP==s.x2axis)AO=0.3*Math.sqrt(y);else AO=0.3*Math.sqrt(Q);var AX=(AP.max-AP.min)/AO,AZ,AT,AV,AW,AR,AM,AL;if(AS.mode=="time"){var AU={second:1E3,minute:60*1E3,hour:60*60*1E3,day:24*60*60*1E3,month:30*24*60*60*1E3,year:365.2425*24*60*60*1E3};var AY=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,
"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];var AN=0;if(AS.minTickSize!=null)if(typeof AS.tickSize=="number")AN=AS.tickSize;else AN=AS.minTickSize[0]*AU[AS.minTickSize[1]];for(AR=0;AR<AY.length-1;++AR)if(AX<(AY[AR][0]*AU[AY[AR][1]]+AY[AR+1][0]*AU[AY[AR+1][1]])/2&&AY[AR][0]*AU[AY[AR][1]]>=AN)break;AZ=AY[AR][0];AV=AY[AR][1];if(AV=="year"){AM=Math.pow(10,Math.floor(Math.log(AX/AU.year)/Math.LN10));AL=AX/AU.year/
AM;if(AL<1.5)AZ=1;else if(AL<3)AZ=2;else if(AL<7.5)AZ=5;else AZ=10;AZ*=AM}if(AS.tickSize){AZ=AS.tickSize[0];AV=AS.tickSize[1]}AT=function(Ac){var Ah=[],Af=Ac.tickSize[0],Ai=Ac.tickSize[1],Ag=new Date(Ac.min);var Ab=Af*AU[Ai];if(Ai=="second")Ag.setUTCSeconds(A(Ag.getUTCSeconds(),Af));if(Ai=="minute")Ag.setUTCMinutes(A(Ag.getUTCMinutes(),Af));if(Ai=="hour")Ag.setUTCHours(A(Ag.getUTCHours(),Af));if(Ai=="month")Ag.setUTCMonth(A(Ag.getUTCMonth(),Af));if(Ai=="year")Ag.setUTCFullYear(A(Ag.getUTCFullYear(),
Af));Ag.setUTCMilliseconds(0);if(Ab>=AU.minute)Ag.setUTCSeconds(0);if(Ab>=AU.hour)Ag.setUTCMinutes(0);if(Ab>=AU.day)Ag.setUTCHours(0);if(Ab>=AU.day*4)Ag.setUTCDate(1);if(Ab>=AU.year)Ag.setUTCMonth(0);var Ak=0,Aj=Number.NaN,Ad;do{Ad=Aj;Aj=Ag.getTime();Ah.push({v:Aj,label:Ac.tickFormatter(Aj,Ac)});if(Ai=="month")if(Af<1){Ag.setUTCDate(1);var Aa=Ag.getTime();Ag.setUTCMonth(Ag.getUTCMonth()+1);var Ae=Ag.getTime();Ag.setTime(Aj+Ak*AU.hour+(Ae-Aa)*Af);Ak=Ag.getUTCHours();Ag.setUTCHours(0)}else Ag.setUTCMonth(Ag.getUTCMonth()+
Af);else if(Ai=="year")Ag.setUTCFullYear(Ag.getUTCFullYear()+Af);else Ag.setTime(Aj+Ab)}while(Aj<Ac.max&&Aj!=Ad);return Ah};AW=function(Aa,Ad){var Af=new Date(Aa);if(AS.timeformat!=null)return C.plot.formatDate(Af,AS.timeformat,AS.monthNames);var Ab=Ad.tickSize[0]*AU[Ad.tickSize[1]];var Ac=Ad.max-Ad.min;var Ae=AS.twelveHourClock?" %p":"";if(Ab<AU.minute)fmt="%h:%M:%S"+Ae;else if(Ab<AU.day)if(Ac<2*AU.day)fmt="%h:%M"+Ae;else fmt="%b %d %h:%M"+Ae;else if(Ab<AU.month)fmt="%b %d";else if(Ab<AU.year)if(Ac<
AU.year)fmt="%b";else fmt="%b %y";else fmt="%y";return C.plot.formatDate(Af,fmt,AS.monthNames)}}else{var AK=AS.tickDecimals;var AQ=-Math.floor(Math.log(AX)/Math.LN10);if(AK!=null&&AQ>AK)AQ=AK;AM=Math.pow(10,-AQ);AL=AX/AM;if(AL<1.5)AZ=1;else if(AL<3){AZ=2;if(AL>2.25&&(AK==null||AQ+1<=AK)){AZ=2.5;++AQ}}else if(AL<7.5)AZ=5;else AZ=10;AZ*=AM;if(AS.minTickSize!=null&&AZ<AS.minTickSize)AZ=AS.minTickSize;if(AS.tickSize!=null)AZ=AS.tickSize;AP.tickDecimals=Math.max(0,AK!=null?AK:AQ);AT=function(Ac){var Ae=
[];var Af=A(Ac.min,Ac.tickSize),Ab=0,Aa=Number.NaN,Ad;do{Ad=Aa;Aa=Af+Ab*Ac.tickSize;Ae.push({v:Aa,label:Ac.tickFormatter(Aa,Ac)});++Ab}while(Aa<Ac.max&&Aa!=Ad);return Ae};AW=function(Aa,Ab){return Aa.toFixed(Ab.tickDecimals)}}AP.tickSize=AV?[AZ,AV]:AZ;AP.tickGenerator=AT;if(C.isFunction(AS.tickFormatter))AP.tickFormatter=function(Aa,Ab){return""+AS.tickFormatter(Aa,Ab)};else AP.tickFormatter=AW}function p(AO,AQ){AO.ticks=[];if(!AO.used)return;if(AQ.ticks==null)AO.ticks=AO.tickGenerator(AO);else if(typeof AQ.ticks==
"number"){if(AQ.ticks>0)AO.ticks=AO.tickGenerator(AO)}else if(AQ.ticks){var AP=AQ.ticks;if(C.isFunction(AP))AP=AP({min:AO.min,max:AO.max});var AN,AK;for(AN=0;AN<AP.length;++AN){var AL=null;var AM=AP[AN];if(typeof AM=="object"){AK=AM[0];if(AM.length>1)AL=AM[1]}else AK=AM;if(AL==null)AL=AO.tickFormatter(AK,AO);AO.ticks[AN]={v:AK,label:AL}}}if(AQ.autoscaleMargin!=null&&AO.ticks.length>0){if(AQ.min==null)AO.min=Math.min(AO.min,AO.ticks[0].v);if(AQ.max==null&&AO.ticks.length>1)AO.max=Math.max(AO.max,AO.ticks[AO.ticks.length-
1].v)}}function AH(){Y.clearRect(0,0,y,Q);var AL=g.grid;if(AL.show&&!AL.aboveData)S();for(var AK=0;AK<O.length;++AK)AA(O[AK]);Z(L.draw,[Y]);if(AL.show&&AL.aboveData)S()}function N(AL,AR){var AO=AR+"axis",AK=AR+"2axis",AN,AQ,AP,AM;if(AL[AO]){AN=s[AO];AQ=AL[AO].from;AP=AL[AO].to}else if(AL[AK]){AN=s[AK];AQ=AL[AK].from;AP=AL[AK].to}else{AN=s[AO];AQ=AL[AR+"1"];AP=AL[AR+"2"]}if(AQ!=null&&AP!=null&&AQ>AP)return{from:AP,to:AQ,axis:AN};return{from:AQ,to:AP,axis:AN}}function S(){var AO;Y.save();Y.translate(e.left,
e.top);if(g.grid.backgroundColor){Y.fillStyle=R(g.grid.backgroundColor,t,0,"rgba(255, 255, 255, 0)");Y.fillRect(0,0,I,t)}var AL=g.grid.markings;if(AL){if(C.isFunction(AL))AL=AL({xmin:s.xaxis.min,xmax:s.xaxis.max,ymin:s.yaxis.min,ymax:s.yaxis.max,xaxis:s.xaxis,yaxis:s.yaxis,x2axis:s.x2axis,y2axis:s.y2axis});for(AO=0;AO<AL.length;++AO){var AK=AL[AO],AQ=N(AK,"x"),AN=N(AK,"y");if(AQ.from==null)AQ.from=AQ.axis.min;if(AQ.to==null)AQ.to=AQ.axis.max;if(AN.from==null)AN.from=AN.axis.min;if(AN.to==null)AN.to=
AN.axis.max;if(AQ.to<AQ.axis.min||AQ.from>AQ.axis.max||AN.to<AN.axis.min||AN.from>AN.axis.max)continue;AQ.from=Math.max(AQ.from,AQ.axis.min);AQ.to=Math.min(AQ.to,AQ.axis.max);AN.from=Math.max(AN.from,AN.axis.min);AN.to=Math.min(AN.to,AN.axis.max);if(AQ.from==AQ.to&&AN.from==AN.to)continue;AQ.from=AQ.axis.p2c(AQ.from);AQ.to=AQ.axis.p2c(AQ.to);AN.from=AN.axis.p2c(AN.from);AN.to=AN.axis.p2c(AN.to);if(AQ.from==AQ.to||AN.from==AN.to){Y.beginPath();Y.strokeStyle=AK.color||g.grid.markingsColor;Y.lineWidth=
AK.lineWidth||g.grid.markingsLineWidth;Y.moveTo(AQ.from,AN.from);Y.lineTo(AQ.to,AN.to);Y.stroke()}else{Y.fillStyle=AK.color||g.grid.markingsColor;Y.fillRect(AQ.from,AN.to,AQ.to-AQ.from,AN.from-AN.to)}}}Y.lineWidth=1;Y.strokeStyle=g.grid.tickColor;Y.beginPath();var AM,AP=s.xaxis;for(AO=0;AO<AP.ticks.length;++AO){AM=AP.ticks[AO].v;if(AM<=AP.min||AM>=s.xaxis.max)continue;Y.moveTo(Math.floor(AP.p2c(AM))+Y.lineWidth/2,0);Y.lineTo(Math.floor(AP.p2c(AM))+Y.lineWidth/2,t)}AP=s.yaxis;for(AO=0;AO<AP.ticks.length;++AO){AM=
AP.ticks[AO].v;if(AM<=AP.min||AM>=AP.max)continue;Y.moveTo(0,Math.floor(AP.p2c(AM))+Y.lineWidth/2);Y.lineTo(I,Math.floor(AP.p2c(AM))+Y.lineWidth/2)}AP=s.x2axis;for(AO=0;AO<AP.ticks.length;++AO){AM=AP.ticks[AO].v;if(AM<=AP.min||AM>=AP.max)continue;Y.moveTo(Math.floor(AP.p2c(AM))+Y.lineWidth/2,-5);Y.lineTo(Math.floor(AP.p2c(AM))+Y.lineWidth/2,5)}AP=s.y2axis;for(AO=0;AO<AP.ticks.length;++AO){AM=AP.ticks[AO].v;if(AM<=AP.min||AM>=AP.max)continue;Y.moveTo(I-5,Math.floor(AP.p2c(AM))+Y.lineWidth/2);Y.lineTo(I+
5,Math.floor(AP.p2c(AM))+Y.lineWidth/2)}Y.stroke();if(g.grid.borderWidth){var AR=g.grid.borderWidth;Y.lineWidth=AR;Y.strokeStyle=g.grid.borderColor;Y.strokeRect(-AR/2,-AR/2,I+AR,t+AR)}Y.restore()}function h(){l.find(".tickLabels").remove();var AK=['<div class="tickLabels" style="font-size:smaller;color:'+g.grid.color+'">'];function AM(AP,AQ){for(var AO=0;AO<AP.ticks.length;++AO){var AN=AP.ticks[AO];if(!AN.label||AN.v<AP.min||AN.v>AP.max)continue;AK.push(AQ(AN,AP))}}var AL=g.grid.labelMargin+g.grid.borderWidth;
AM(s.xaxis,function(AN,AO){return'<div style="position:absolute;top:'+(e.top+t+AL)+"px;left:"+Math.round(e.left+AO.p2c(AN.v)-AO.labelWidth/2)+"px;width:"+AO.labelWidth+'px;text-align:center" class="tickLabel">'+AN.label+"</div>"});AM(s.yaxis,function(AN,AO){return'<div style="position:absolute;top:'+Math.round(e.top+AO.p2c(AN.v)-AO.labelHeight/2)+"px;right:"+(e.right+I+AL)+"px;width:"+AO.labelWidth+'px;text-align:right" class="tickLabel">'+AN.label+"</div>"});AM(s.x2axis,function(AN,AO){return'<div style="position:absolute;bottom:'+
(e.bottom+t+AL)+"px;left:"+Math.round(e.left+AO.p2c(AN.v)-AO.labelWidth/2)+"px;width:"+AO.labelWidth+'px;text-align:center" class="tickLabel">'+AN.label+"</div>"});AM(s.y2axis,function(AN,AO){return'<div style="position:absolute;top:'+Math.round(e.top+AO.p2c(AN.v)-AO.labelHeight/2)+"px;left:"+(e.left+I+AL)+"px;width:"+AO.labelWidth+'px;text-align:left" class="tickLabel">'+AN.label+"</div>"});AK.push("</div>");l.append(AK.join(""))}function AA(AK){if(AK.lines.show)a(AK);if(AK.bars.show)n(AK);if(AK.points.show)o(AK)}
function a(AN){function AM(AY,AZ,AR,Ad,Ac){var Ae=AY.points,AS=AY.pointsize,AW=null,AV=null;Y.beginPath();for(var AX=AS;AX<Ae.length;AX+=AS){var AU=Ae[AX-AS],Ab=Ae[AX-AS+1],AT=Ae[AX],Aa=Ae[AX+1];if(AU==null||AT==null)continue;if(Ab<=Aa&&Ab<Ac.min){if(Aa<Ac.min)continue;AU=(Ac.min-Ab)/(Aa-Ab)*(AT-AU)+AU;Ab=Ac.min}else if(Aa<=Ab&&Aa<Ac.min){if(Ab<Ac.min)continue;AT=(Ac.min-Ab)/(Aa-Ab)*(AT-AU)+AU;Aa=Ac.min}if(Ab>=Aa&&Ab>Ac.max){if(Aa>Ac.max)continue;AU=(Ac.max-Ab)/(Aa-Ab)*(AT-AU)+AU;Ab=Ac.max}else if(Aa>=
Ab&&Aa>Ac.max){if(Ab>Ac.max)continue;AT=(Ac.max-Ab)/(Aa-Ab)*(AT-AU)+AU;Aa=Ac.max}if(AU<=AT&&AU<Ad.min){if(AT<Ad.min)continue;Ab=(Ad.min-AU)/(AT-AU)*(Aa-Ab)+Ab;AU=Ad.min}else if(AT<=AU&&AT<Ad.min){if(AU<Ad.min)continue;Aa=(Ad.min-AU)/(AT-AU)*(Aa-Ab)+Ab;AT=Ad.min}if(AU>=AT&&AU>Ad.max){if(AT>Ad.max)continue;Ab=(Ad.max-AU)/(AT-AU)*(Aa-Ab)+Ab;AU=Ad.max}else if(AT>=AU&&AT>Ad.max){if(AU>Ad.max)continue;Aa=(Ad.max-AU)/(AT-AU)*(Aa-Ab)+Ab;AT=Ad.max}if(AU!=AW||Ab!=AV)Y.moveTo(Ad.p2c(AU)+AZ,Ac.p2c(Ab)+AR);AW=
AT;AV=Aa;Y.lineTo(Ad.p2c(AT)+AZ,Ac.p2c(Aa)+AR)}Y.stroke()}function AO(AX,Ae,Ac){var Af=AX.points,AR=AX.pointsize,AS=Math.min(Math.max(0,Ac.min),Ac.max),Aa,AV=0,Ad=false;for(var AW=AR;AW<Af.length;AW+=AR){var AU=Af[AW-AR],Ab=Af[AW-AR+1],AT=Af[AW],AZ=Af[AW+1];if(Ad&&AU!=null&&AT==null){Y.lineTo(Ae.p2c(AV),Ac.p2c(AS));Y.fill();Ad=false;continue}if(AU==null||AT==null)continue;if(AU<=AT&&AU<Ae.min){if(AT<Ae.min)continue;Ab=(Ae.min-AU)/(AT-AU)*(AZ-Ab)+Ab;AU=Ae.min}else if(AT<=AU&&AT<Ae.min){if(AU<Ae.min)continue;
AZ=(Ae.min-AU)/(AT-AU)*(AZ-Ab)+Ab;AT=Ae.min}if(AU>=AT&&AU>Ae.max){if(AT>Ae.max)continue;Ab=(Ae.max-AU)/(AT-AU)*(AZ-Ab)+Ab;AU=Ae.max}else if(AT>=AU&&AT>Ae.max){if(AU>Ae.max)continue;AZ=(Ae.max-AU)/(AT-AU)*(AZ-Ab)+Ab;AT=Ae.max}if(!Ad){Y.beginPath();Y.moveTo(Ae.p2c(AU),Ac.p2c(AS));Ad=true}if(Ab>=Ac.max&&AZ>=Ac.max){Y.lineTo(Ae.p2c(AU),Ac.p2c(Ac.max));Y.lineTo(Ae.p2c(AT),Ac.p2c(Ac.max));AV=AT;continue}else if(Ab<=Ac.min&&AZ<=Ac.min){Y.lineTo(Ae.p2c(AU),Ac.p2c(Ac.min));Y.lineTo(Ae.p2c(AT),Ac.p2c(Ac.min));
AV=AT;continue}var Ag=AU,AY=AT;if(Ab<=AZ&&Ab<Ac.min&&AZ>=Ac.min){AU=(Ac.min-Ab)/(AZ-Ab)*(AT-AU)+AU;Ab=Ac.min}else if(AZ<=Ab&&AZ<Ac.min&&Ab>=Ac.min){AT=(Ac.min-Ab)/(AZ-Ab)*(AT-AU)+AU;AZ=Ac.min}if(Ab>=AZ&&Ab>Ac.max&&AZ<=Ac.max){AU=(Ac.max-Ab)/(AZ-Ab)*(AT-AU)+AU;Ab=Ac.max}else if(AZ>=Ab&&AZ>Ac.max&&Ab<=Ac.max){AT=(Ac.max-Ab)/(AZ-Ab)*(AT-AU)+AU;AZ=Ac.max}if(AU!=Ag){if(Ab<=Ac.min)Aa=Ac.min;else Aa=Ac.max;Y.lineTo(Ae.p2c(Ag),Ac.p2c(Aa));Y.lineTo(Ae.p2c(AU),Ac.p2c(Aa))}Y.lineTo(Ae.p2c(AU),Ac.p2c(Ab));Y.lineTo(Ae.p2c(AT),
Ac.p2c(AZ));if(AT!=AY){if(AZ<=Ac.min)Aa=Ac.min;else Aa=Ac.max;Y.lineTo(Ae.p2c(AT),Ac.p2c(Aa));Y.lineTo(Ae.p2c(AY),Ac.p2c(Aa))}AV=Math.max(AT,AY)}if(Ad){Y.lineTo(Ae.p2c(AV),Ac.p2c(AS));Y.fill()}}Y.save();Y.translate(e.left,e.top);Y.lineJoin="round";var AP=AN.lines.lineWidth,AK=AN.shadowSize;if(AP>0&&AK>0){Y.lineWidth=AK;Y.strokeStyle="rgba(0,0,0,0.1)";var AQ=Math.PI/18;AM(AN.datapoints,Math.sin(AQ)*(AP/2+AK/2),Math.cos(AQ)*(AP/2+AK/2),AN.xaxis,AN.yaxis);Y.lineWidth=AK/2;AM(AN.datapoints,Math.sin(AQ)*
(AP/2+AK/4),Math.cos(AQ)*(AP/2+AK/4),AN.xaxis,AN.yaxis)}Y.lineWidth=AP;Y.strokeStyle=AN.color;var AL=V(AN.lines,AN.color,0,t);if(AL){Y.fillStyle=AL;AO(AN.datapoints,AN.xaxis,AN.yaxis)}if(AP>0)AM(AN.datapoints,0,0,AN.xaxis,AN.yaxis);Y.restore()}function o(AN){function AP(AU,AT,Ab,AR,AV,AZ,AY){var Aa=AU.points,AQ=AU.pointsize;for(var AS=0;AS<Aa.length;AS+=AQ){var AX=Aa[AS],AW=Aa[AS+1];if(AX==null||AX<AZ.min||AX>AZ.max||AW<AY.min||AW>AY.max)continue;Y.beginPath();Y.arc(AZ.p2c(AX),AY.p2c(AW)+AR,AT,0,
AV,false);if(Ab){Y.fillStyle=Ab;Y.fill()}Y.stroke()}}Y.save();Y.translate(e.left,e.top);var AO=AN.lines.lineWidth,AL=AN.shadowSize,AK=AN.points.radius;if(AO>0&&AL>0){var AM=AL/2;Y.lineWidth=AM;Y.strokeStyle="rgba(0,0,0,0.1)";AP(AN.datapoints,AK,null,AM+AM/2,Math.PI,AN.xaxis,AN.yaxis);Y.strokeStyle="rgba(0,0,0,0.2)";AP(AN.datapoints,AK,null,AM/2,Math.PI,AN.xaxis,AN.yaxis)}Y.lineWidth=AO;Y.strokeStyle=AN.color;AP(AN.datapoints,AK,V(AN.points,AN.color),0,2*Math.PI,AN.xaxis,AN.yaxis);Y.restore()}function AB(AV,
AU,Ad,AQ,AY,AN,AL,AT,AS,Ac,AZ){var AM,Ab,AR,AX,AO,AK,AW,AP,Aa;if(AZ){AP=AK=AW=true;AO=false;AM=Ad;Ab=AV;AX=AU+AQ;AR=AU+AY;if(Ab<AM){Aa=Ab;Ab=AM;AM=Aa;AO=true;AK=false}}else{AO=AK=AW=true;AP=false;AM=AV+AQ;Ab=AV+AY;AR=Ad;AX=AU;if(AX<AR){Aa=AX;AX=AR;AR=Aa;AP=true;AW=false}}if(Ab<AT.min||AM>AT.max||AX<AS.min||AR>AS.max)return;if(AM<AT.min){AM=AT.min;AO=false}if(Ab>AT.max){Ab=AT.max;AK=false}if(AR<AS.min){AR=AS.min;AP=false}if(AX>AS.max){AX=AS.max;AW=false}AM=AT.p2c(AM);AR=AS.p2c(AR);Ab=AT.p2c(Ab);AX=
AS.p2c(AX);if(AL){Ac.beginPath();Ac.moveTo(AM,AR);Ac.lineTo(AM,AX);Ac.lineTo(Ab,AX);Ac.lineTo(Ab,AR);Ac.fillStyle=AL(AR,AX);Ac.fill()}if(AO||AK||AW||AP){Ac.beginPath();Ac.moveTo(AM,AR+AN);if(AO)Ac.lineTo(AM,AX+AN);else Ac.moveTo(AM,AX+AN);if(AW)Ac.lineTo(Ab,AX+AN);else Ac.moveTo(Ab,AX+AN);if(AK)Ac.lineTo(Ab,AR+AN);else Ac.moveTo(Ab,AR+AN);if(AP)Ac.lineTo(AM,AR+AN);else Ac.moveTo(AM,AR+AN);Ac.stroke()}}function n(AM){function AL(AS,AR,AU,AP,AT,AW,AV){var AX=AS.points,AO=AS.pointsize;for(var AQ=0;AQ<
AX.length;AQ+=AO){if(AX[AQ]==null)continue;AB(AX[AQ],AX[AQ+1],AX[AQ+2],AR,AU,AP,AT,AW,AV,Y,AM.bars.horizontal)}}Y.save();Y.translate(e.left,e.top);Y.lineWidth=AM.bars.lineWidth;Y.strokeStyle=AM.color;var AK=AM.bars.align=="left"?0:-AM.bars.barWidth/2;var AN=AM.bars.fill?function(AO,AP){return V(AM.bars,AM.color,AO,AP)}:null;AL(AM.datapoints,AK,AK+AM.bars.barWidth,0,AN,AM.xaxis,AM.yaxis);Y.restore()}function V(AM,AK,AL,AO){var AN=AM.fill;if(!AN)return null;if(AM.fillColor)return R(AM.fillColor,AL,
AO,AK);var AP=C.color.parse(AK);AP.a=typeof AN=="number"?AN:0.4;AP.normalize();return AP.toString()}function AI(){l.find(".legend").remove();if(!g.legend.show)return;var AP=[],AN=false,AV=g.legend.labelFormatter,AU,AR;for(i=0;i<O.length;++i){AU=O[i];AR=AU.label;if(!AR)continue;if(i%g.legend.noColumns==0){if(AN)AP.push("</tr>");AP.push("<tr>");AN=true}if(AV)AR=AV(AR,AU);AP.push('<td class="legendColorBox"><div style="border:1px solid '+g.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+
AU.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+AR+"</td>")}if(AN)AP.push("</tr>");if(AP.length==0)return;var AT='<table style="font-size:smaller;color:'+g.grid.color+'">'+AP.join("")+"</table>";if(g.legend.container!=null)C(g.legend.container).html(AT);else{var AQ="",AL=g.legend.position,AM=g.legend.margin;if(AM[0]==null)AM=[AM,AM];if(AL.charAt(0)=="n")AQ+="top:"+(AM[1]+e.top)+"px;";else if(AL.charAt(0)=="s")AQ+="bottom:"+(AM[1]+e.bottom)+"px;";if(AL.charAt(1)=="e")AQ+="right:"+
(AM[0]+e.right)+"px;";else if(AL.charAt(1)=="w")AQ+="left:"+(AM[0]+e.left)+"px;";var AS=C('<div class="legend">'+AT.replace('style="','style="position:absolute;'+AQ+";")+"</div>").appendTo(l);if(g.legend.backgroundOpacity!=0){var AO=g.legend.backgroundColor;if(AO==null){AO=g.grid.backgroundColor;if(AO&&typeof AO=="string")AO=C.color.parse(AO);else AO=C.color.extract(AS,"background-color");AO.a=1;AO=AO.toString()}var AK=AS.children();C('<div style="position:absolute;width:'+AK.width()+"px;height:"+
AK.height()+"px;"+AQ+"background-color:"+AO+';"> </div>').prependTo(AS).css("opacity",g.legend.backgroundOpacity)}}}var w=[],J=null;function AF(AR,AP,AM){var AX=g.grid.mouseActiveRadius,Aj=AX*AX+1,Ah=null,Aa=false,Af,Ad;for(Af=0;Af<O.length;++Af){if(!AM(O[Af]))continue;var AY=O[Af],AQ=AY.xaxis,AO=AY.yaxis,Ae=AY.datapoints.points,Ac=AY.datapoints.pointsize,AZ=AQ.c2p(AR),AW=AO.c2p(AP),AL=AX/AQ.scale,AK=AX/AO.scale;if(AY.lines.show||AY.points.show)for(Ad=0;Ad<Ae.length;Ad+=Ac){var AT=Ae[Ad],AS=Ae[Ad+
1];if(AT==null)continue;if(AT-AZ>AL||AT-AZ<-AL||AS-AW>AK||AS-AW<-AK)continue;var AV=Math.abs(AQ.p2c(AT)-AR),AU=Math.abs(AO.p2c(AS)-AP),Ab=AV*AV+AU*AU;if(Ab<=Aj){Aj=Ab;Ah=[Af,Ad/Ac]}}if(AY.bars.show&&!Ah){var AN=AY.bars.align=="left"?0:-AY.bars.barWidth/2,Ag=AN+AY.bars.barWidth;for(Ad=0;Ad<Ae.length;Ad+=Ac){var AT=Ae[Ad],AS=Ae[Ad+1],Ai=Ae[Ad+2];if(AT==null)continue;if(O[Af].bars.horizontal?AZ<=Math.max(Ai,AT)&&AZ>=Math.min(Ai,AT)&&AW>=AS+AN&&AW<=AS+Ag:AZ>=AT+AN&&AZ<=AT+Ag&&AW>=Math.min(Ai,AS)&&AW<=
Math.max(Ai,AS))Ah=[Af,Ad/Ac]}}}if(Ah){Af=Ah[0];Ad=Ah[1];Ac=O[Af].datapoints.pointsize;return{datapoint:O[Af].datapoints.points.slice(Ad*Ac,(Ad+1)*Ac),dataIndex:Ad,series:O[Af],seriesIndex:Af}}return null}function D(AK){if(g.grid.hoverable)H("plothover",AK,function(AL){return AL.hoverable!=false})}function d(AK){H("plotclick",AK,function(AL){return AL.clickable!=false})}function H(AL,AK,AM){var AN=AD.offset(),AS={pageX:AK.pageX,pageY:AK.pageY},AQ=AK.pageX-AN.left-e.left,AO=AK.pageY-AN.top-e.top;if(s.xaxis.used)AS.x=
s.xaxis.c2p(AQ);if(s.yaxis.used)AS.y=s.yaxis.c2p(AO);if(s.x2axis.used)AS.x2=s.x2axis.c2p(AQ);if(s.y2axis.used)AS.y2=s.y2axis.c2p(AO);var AT=AF(AQ,AO,AM);if(AT){AT.pageX=parseInt(AT.series.xaxis.p2c(AT.datapoint[0])+AN.left+e.left);AT.pageY=parseInt(AT.series.yaxis.p2c(AT.datapoint[1])+AN.top+e.top)}if(g.grid.autoHighlight){for(var AP=0;AP<w.length;++AP){var AR=w[AP];if(AR.auto==AL&&!(AT&&AR.series==AT.series&&AR.point==AT.datapoint))x(AR.series,AR.point)}if(AT)AE(AT.series,AT.datapoint,AL)}l.trigger(AL,
[AS,AT])}function q(){if(!J)J=setTimeout(v,30)}function v(){J=null;AJ.save();AJ.clearRect(0,0,y,Q);AJ.translate(e.left,e.top);var AL,AK;for(AL=0;AL<w.length;++AL){AK=w[AL];if(AK.series.bars.show)z(AK.series,AK.point);else u(AK.series,AK.point)}AJ.restore();Z(L.drawOverlay,[AJ])}function AE(AM,AK,AN){if(typeof AM=="number")AM=O[AM];if(typeof AK=="number")AK=AM.data[AK];var AL=j(AM,AK);if(AL==-1){w.push({series:AM,point:AK,auto:AN});q()}else if(!AN)w[AL].auto=false}function x(AM,AK){if(AM==null&&AK==
null){w=[];q()}if(typeof AM=="number")AM=O[AM];if(typeof AK=="number")AK=AM.data[AK];var AL=j(AM,AK);if(AL!=-1){w.splice(AL,1);q()}}function j(AM,AN){for(var AK=0;AK<w.length;++AK){var AL=w[AK];if(AL.series==AM&&AL.point[0]==AN[0]&&AL.point[1]==AN[1])return AK}return-1}function u(AN,AM){var AL=AM[0],AR=AM[1],AQ=AN.xaxis,AP=AN.yaxis;if(AL<AQ.min||AL>AQ.max||AR<AP.min||AR>AP.max)return;var AO=AN.points.radius+AN.points.lineWidth/2;AJ.lineWidth=AO;AJ.strokeStyle=C.color.parse(AN.color).scale("a",0.5).toString();
var AK=1.5*AO;AJ.beginPath();AJ.arc(AQ.p2c(AL),AP.p2c(AR),AK,0,2*Math.PI,false);AJ.stroke()}function z(AN,AK){AJ.lineWidth=AN.bars.lineWidth;AJ.strokeStyle=C.color.parse(AN.color).scale("a",0.5).toString();var AM=C.color.parse(AN.color).scale("a",0.5).toString();var AL=AN.bars.align=="left"?0:-AN.bars.barWidth/2;AB(AK[0],AK[1],AK[2]||0,AL,AL+AN.bars.barWidth,0,function(){return AM},AN.xaxis,AN.yaxis,AJ,AN.bars.horizontal)}function R(AM,AL,AQ,AO){if(typeof AM=="string")return AM;else{var AP=Y.createLinearGradient(0,
AQ,0,AL);for(var AN=0,AK=AM.colors.length;AN<AK;++AN){var AR=AM.colors[AN];if(typeof AR!="string"){AR=C.color.parse(AO).scale("rgb",AR.brightness);AR.a*=AR.opacity;AR=AR.toString()}AP.addColorStop(AN/(AK-1),AR)}return AP}}}C.plot=function(G,E,D){var F=new B(C(G),E,D,C.plot.plugins);return F};C.plot.plugins=[];C.plot.formatDate=function(H,E,G){var L=function(N){N=""+N;return N.length==1?"0"+N:N};var D=[];var M=false;var K=H.getUTCHours();var I=K<12;if(G==null)G=["Jan","Feb","Mar","Apr","May","Jun",
"Jul","Aug","Sep","Oct","Nov","Dec"];if(E.search(/%p|%P/)!=-1)if(K>12)K=K-12;else if(K==0)K=12;for(var F=0;F<E.length;++F){var J=E.charAt(F);if(M){switch(J){case "h":J=""+K;break;case "H":J=L(K);break;case "M":J=L(H.getUTCMinutes());break;case "S":J=L(H.getUTCSeconds());break;case "d":J=""+H.getUTCDate();break;case "m":J=""+(H.getUTCMonth()+1);break;case "y":J=""+H.getUTCFullYear();break;case "b":J=""+G[H.getUTCMonth()];break;case "p":J=I?"am":"pm";break;case "P":J=I?"AM":"PM";break}D.push(J);M=false}else if(J==
"%")M=true;else D.push(J)}return D.join("")};function A(E,D){return D*Math.floor(E/D)}})(jQuery);var SWFUpload;if(SWFUpload==undefined)SWFUpload=function(a){this.initSWFUpload(a)};SWFUpload.prototype.initSWFUpload=function(a){try{this.customSettings={};this.settings=a;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(b){delete SWFUpload.instances[this.movieName];throw b;}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";
SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};
SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(a){if(typeof a!=="string"||a.match(/^https?:\/\//i)||a.match(/^\//))return a;var b=window.location.pathname.lastIndexOf("/");path=b<=0?"/":window.location.pathname.substr(0,b)+"/";return path+a};
SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(a,b){this.settings[a]=this.settings[a]==undefined?b:this.settings[a]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types",
"*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");
this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;
this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",
null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(this.settings.prevent_swf_caching)this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime();if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=
SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};
SWFUpload.prototype.loadFlash=function(){var a,b;if(document.getElementById(this.movieName)!==null)throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(a==undefined)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;b=document.createElement("div");b.innerHTML=this.getFlashHTML();a.parentNode.replaceChild(b.firstChild,a);if(window[this.movieName]==
undefined)window[this.movieName]=this.getMovieElement()};
SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload"><param name="wmode" value="',this.settings.button_window_mode,'" /><param name="movie" value="',this.settings.flash_url,'" /><param name="quality" value="high" /><param name="menu" value="false" /><param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+
this.getFlashVars()+'" />',"</object>"].join("")};
SWFUpload.prototype.getFlashVars=function(){var a=this.buildParamString(),b=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(b),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",
encodeURIComponent(a),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),
"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),
"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined)this.movieElement=document.getElementById(this.movieName);if(this.movieElement===null)throw"Could not find Flash element";return this.movieElement};
SWFUpload.prototype.buildParamString=function(){var a=this.settings.post_params,b=[];if(typeof a==="object")for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c.toString())+"="+encodeURIComponent(a[c].toString()));return b.join("&amp;")};
SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var a=null;if((a=this.getMovieElement())&&typeof a.CallFunction==="unknown"){for(var b in a)try{if(typeof a[b]==="function")a[b]=null}catch(c){}try{a.parentNode.removeChild(a)}catch(d){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieName=this.eventQueue=this.customSettings=this.settings=this.movieElement=null;return true}catch(e){return false}};
SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\nVersion: ",SWFUpload.version,"\nMovie Name: ",this.movieName,"\nSettings:\n\tupload_url:               ",this.settings.upload_url,"\n\tflash_url:                ",this.settings.flash_url,"\n\tuse_query_string:         ",this.settings.use_query_string.toString(),"\n\trequeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n\thttp_success:             ",this.settings.http_success.join(", "),"\n\tassume_success_timeout:   ",
this.settings.assume_success_timeout,"\n\tfile_post_name:           ",this.settings.file_post_name,"\n\tpost_params:              ",this.settings.post_params.toString(),"\n\tfile_types:               ",this.settings.file_types,"\n\tfile_types_description:   ",this.settings.file_types_description,"\n\tfile_size_limit:          ",this.settings.file_size_limit,"\n\tfile_upload_limit:        ",this.settings.file_upload_limit,"\n\tfile_queue_limit:         ",this.settings.file_queue_limit,"\n\tdebug:                    ",
this.settings.debug.toString(),"\n\tprevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n\tbutton_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n\tbutton_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n\tbutton_image_url:         ",this.settings.button_image_url.toString(),"\n\tbutton_width:             ",this.settings.button_width.toString(),"\n\tbutton_height:            ",this.settings.button_height.toString(),"\n\tbutton_text:              ",
this.settings.button_text.toString(),"\n\tbutton_text_style:        ",this.settings.button_text_style.toString(),"\n\tbutton_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n\tbutton_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n\tbutton_action:            ",this.settings.button_action.toString(),"\n\tbutton_disabled:          ",this.settings.button_disabled.toString(),"\n\tcustom_settings:          ",this.settings.custom_settings.toString(),"\nEvent Handlers:\n\tswfupload_loaded_handler assigned:  ",
(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n\tfile_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n\tfile_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n\tfile_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n\tupload_start_handler assigned:      ",(typeof this.settings.upload_start_handler===
"function").toString(),"\n\tupload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n\tupload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n\tupload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n\tupload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n\tdebug_handler assigned:             ",
(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(a,b,c){return b==undefined?this.settings[a]=c:this.settings[a]=b};SWFUpload.prototype.getSetting=function(a){if(this.settings[a]!=undefined)return this.settings[a];return""};
SWFUpload.prototype.callFlash=function(a,b){b=b||[];var c=this.getMovieElement(),d,e;try{e=c.CallFunction('<invoke name="'+a+'" returntype="javascript">'+__flash__argumentsToXML(b,0)+"</invoke>");d=eval(e)}catch(f){throw"Call to "+a+" failed";}if(d!=undefined&&typeof d.post==="object")d=this.unescapeFilePostParams(d);return d};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};
SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};SWFUpload.prototype.cancelUpload=function(a,b){if(b!==false)b=true;this.callFlash("CancelUpload",[a,b])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])};
SWFUpload.prototype.getFile=function(a){return typeof a==="number"?this.callFlash("GetFileByIndex",[a]):this.callFlash("GetFile",[a])};SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])};SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};
SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};
SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a;this.settings.file_types_description=b;this.callFlash("SetFileTypes",[a,b])};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a])};
SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};
SWFUpload.prototype.setHTTPSuccess=function(a){if(typeof a==="string")a=a.replace(" ","").split(",");this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};
SWFUpload.prototype.setButtonImageURL=function(a){if(a==undefined)a="";this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};SWFUpload.prototype.setButtonDimensions=function(a,b){this.settings.button_width=a;this.settings.button_height=b;var c=this.getMovieElement();if(c!=undefined){c.style.width=a+"px";c.style.height=b+"px"}this.callFlash("SetButtonDimensions",[a,b])};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};
SWFUpload.prototype.setButtonTextPadding=function(a,b){this.settings.button_text_top_padding=b;this.settings.button_text_left_padding=a;this.callFlash("SetButtonTextPadding",[a,b])};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};
SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};
SWFUpload.prototype.queueEvent=function(a,b){if(b==undefined)b=[];else b instanceof Array||(b=[b]);var c=this;if(typeof this.settings[a]==="function"){this.eventQueue.push(function(){this.settings[a].apply(this,b)});setTimeout(function(){c.executeNextEvent()},0)}else if(this.settings[a]!==null)throw"Event handler "+a+" is unknown or is not a function";};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;typeof a==="function"&&a.apply(this)};
SWFUpload.prototype.unescapeFilePostParams=function(a){var b=/[$]([0-9a-f]{4})/i,c={},d;if(a!=undefined){for(var e in a.post)if(a.post.hasOwnProperty(e)){d=e;for(var f;(f=b.exec(d))!==null;)d=d.replace(f[0],String.fromCharCode(parseInt("0x"+f[1],16)));c[d]=a.post[e]}a.post=c}return a};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return false}};
SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();if(a){this.cleanUp(a);this.queueEvent("swfupload_loaded_handler")}else this.debug("Flash called back ready but the flash movie can't be found.")};
SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&typeof a.CallFunction==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var b in a)try{if(typeof a[b]==="function")a[b]=null}catch(c){}}}catch(d){}window.__flash__removeCallback=function(e,f){try{if(e)e[f]=null}catch(g){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};
SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};SWFUpload.prototype.fileQueueError=function(a,b,c){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,b,c])};SWFUpload.prototype.fileDialogComplete=function(a,b,c){this.queueEvent("file_dialog_complete_handler",[a,b,c])};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};
SWFUpload.prototype.returnUploadStart=function(a){var b;if(typeof this.settings.upload_start_handler==="function"){a=this.unescapeFilePostParams(a);b=this.settings.upload_start_handler.call(this,a)}else if(this.settings.upload_start_handler!=undefined)throw"upload_start_handler must be a function";if(b===undefined)b=true;b=!!b;this.callFlash("ReturnUploadStart",[b])};
SWFUpload.prototype.uploadProgress=function(a,b,c){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,b,c])};SWFUpload.prototype.uploadError=function(a,b,c){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,b,c])};SWFUpload.prototype.uploadSuccess=function(a,b,c){a=this.unescapeFilePostParams(a);this.queueEvent("upload_success_handler",[a,b,c])};
SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)};SWFUpload.prototype.debugMessage=function(a){if(this.settings.debug){var b=[];if(typeof a==="object"&&typeof a.name==="string"&&typeof a.message==="string"){for(var c in a)a.hasOwnProperty(c)&&b.push(c+": "+a[c]);a=b.join("\n")||"";b=a.split("\n");a="EXCEPTION: "+b.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(a)}else SWFUpload.Console.writeLine(a)}};
SWFUpload.Console={};
SWFUpload.Console.writeLine=function(a){var b,c;try{b=document.getElementById("SWFUpload_Console");if(!b){c=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(c);b=document.createElement("textarea");b.id="SWFUpload_Console";b.style.fontFamily="monospace";b.setAttribute("wrap","off");b.wrap="off";b.style.overflow="auto";b.style.width="700px";b.style.height="350px";b.style.margin="5px";c.appendChild(b)}b.value+=a+"\n";b.scrollTop=b.scrollHeight-b.clientHeight}catch(d){alert("Exception: "+
d.name+" Message: "+d.message)}};var SWFUpload;
if(typeof SWFUpload==="function"){SWFUpload.queue={};SWFUpload.prototype.initSettings=function(a){return function(){typeof a==="function"&&a.call(this);this.queueSettings={};this.queueSettings.queue_cancelled_flag=false;this.queueSettings.queue_upload_count=0;this.queueSettings.user_upload_complete_handler=this.settings.upload_complete_handler;this.queueSettings.user_upload_start_handler=this.settings.upload_start_handler;this.settings.upload_complete_handler=SWFUpload.queue.uploadCompleteHandler;this.settings.upload_start_handler=
SWFUpload.queue.uploadStartHandler;this.settings.queue_complete_handler=this.settings.queue_complete_handler||null}}(SWFUpload.prototype.initSettings);SWFUpload.prototype.startUpload=function(a){this.queueSettings.queue_cancelled_flag=false;this.callFlash("StartUpload",[a])};SWFUpload.prototype.cancelQueue=function(){this.queueSettings.queue_cancelled_flag=true;this.stopUpload();for(var a=this.getStats();a.files_queued>0;){this.cancelUpload();a=this.getStats()}};SWFUpload.queue.uploadStartHandler=
function(a){var b;if(typeof this.queueSettings.user_upload_start_handler==="function")b=this.queueSettings.user_upload_start_handler.call(this,a);b=b===false?false:true;this.queueSettings.queue_cancelled_flag=!b;return b};SWFUpload.queue.uploadCompleteHandler=function(a){var b=this.queueSettings.user_upload_complete_handler;a.filestatus===SWFUpload.FILE_STATUS.COMPLETE&&this.queueSettings.queue_upload_count++;if(typeof b==="function"?b.call(this,a)===false?false:true:a.filestatus===SWFUpload.FILE_STATUS.QUEUED?
false:true)if(this.getStats().files_queued>0&&this.queueSettings.queue_cancelled_flag===false)this.startUpload();else{if(this.queueSettings.queue_cancelled_flag===false)this.queueEvent("queue_complete_handler",[this.queueSettings.queue_upload_count]);else this.queueSettings.queue_cancelled_flag=false;this.queueSettings.queue_upload_count=0}}};$(function(){$("img.cross").click(function(){$(this).parent().remove()});var sortableList=$("div.image-list-listing");var dictImgIndexes=[];sortableList.sortable({placeholder:"stored-img-placeholder",update:function(event,ui){sortableList.children().each(function(_ndx){$(":last-child",this).attr("value",_ndx)})}}).disableSelection();if(sortableList.children().length==0)sortableList.hide()});var Utils={};Utils.getTime=function(){var d=new Date;d.setDate((new Date).getDate());return d.toTimeString().substr(0,d.toTimeString().lastIndexOf(" "))};Utils.getTimeWithSeconds=function(){var d=new Date;d.setDate((new Date).getDate());return d.toTimeString().substr(0,d.toTimeString().lastIndexOf(" "))};Utils.formatMessage=function(_sMessage){var retStr=_sMessage;retStr=Utils.sanitizeMsg(retStr);retStr+="<br />";return retStr};
Utils.isValidEmail=function(strEmail){var emailRegEx=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return strEmail.match(emailRegEx)};Utils.sanitizeMsg=function(sMsg){var trimChars=["<",">","\n"];var safeChars=["&lt;","&gt;","<br />"];var retString=sMsg;for(var i=0;i<trimChars.length;i++)while(retString.indexOf(trimChars[i])!=-1)retString=retString.replace(trimChars[i],safeChars[i]);return retString};Utils.pxToInt=function(sPixels){return parseInt(sPixels.replace("px",""))};
Utils.scale=function(obj,w,h){var nw=obj.width(),nh=obj.height();if(nw>w&&w>0){nw=w;nh=w/obj.width()*obj.height()}if(nh>h&&h>0){nh=h;nw=h/obj.height()*obj.width()}xscale=obj.width()/nw;yscale=obj.height()/nh;obj.width(nw).height(nh)};Utils.isImageFile=function(filePath){var fileName=Utils.getFileName(filePath);var validExtensions=[".jpg",".jpeg",".png",".gif"];var bIsImage=false;$.each(validExtensions,function(i,ext){if(fileName.endsWith(ext)){bIsImage=true;return}});return bIsImage};
Utils.getFileName=function(filePath){return filePath.split("\\").pop().split("/").pop()};Utils.getFileNameWithoutExtension=function(filePath){var fileName=Utils.getFileName(filePath);var extensionIndex=fileName.lastIndexOf(".");return fileName.substr(0,fileName.lastIndexOf("."))};String.prototype.endsWith=function(str){var lastIndex=this.lastIndexOf(str);return lastIndex!=-1&&lastIndex+str.length==this.length};var Random={};Random.getNumber=function(range){return Math.floor(Math.random()*range)};
Random.getChar=function(){var chars="0123456789abcdefghijklmnopqurstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ";return chars.substr(Random.getNumber(62),1)};Random.getId=function(size){var str="";for(var i=0;i<size;i++)str+=Random.getChar();return str};Utils.random=Random;String.empty="";String.prototype.bool=function(){return/^true$/i.test(this)};var dateFormat=function(){var k=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,l=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,s=/[^-+\dA-Z]/g,d=function(a,c){a=String(a);for(c=c||2;a.length<c;)a="0"+a;return a};return function(a,c,h){var f=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(a)=="[object String]"&&!/\d/.test(a)){c=a;a=undefined}a=a?new Date(a):new Date;if(isNaN(a))throw SyntaxError("invalid date");
c=String(f.masks[c]||c||f.masks["default"]);if(c.slice(0,4)=="UTC:"){c=c.slice(4);h=true}var b=h?"getUTC":"get",g=a[b+"Date"](),n=a[b+"Day"](),i=a[b+"Month"](),o=a[b+"FullYear"](),e=a[b+"Hours"](),p=a[b+"Minutes"](),q=a[b+"Seconds"]();b=a[b+"Milliseconds"]();var m=h?0:a.getTimezoneOffset(),r={d:g,dd:d(g),ddd:f.i18n.dayNames[n],dddd:f.i18n.dayNames[n+7],m:i+1,mm:d(i+1),mmm:f.i18n.monthNames[i],mmmm:f.i18n.monthNames[i+12],yy:String(o).slice(2),yyyy:o,h:e%12||12,hh:d(e%12||12),H:e,HH:d(e),M:p,MM:d(p),
s:q,ss:d(q),l:d(b,3),L:d(b>99?Math.round(b/10):b),t:e<12?"a":"p",tt:e<12?"am":"pm",T:e<12?"A":"P",TT:e<12?"AM":"PM",Z:h?"UTC":(String(a).match(l)||[""]).pop().replace(s,""),o:(m>0?"-":"+")+d(Math.floor(Math.abs(m)/60)*100+Math.abs(m)%60,4),S:["th","st","nd","rd"][g%10>3?0:(g%100-g%10!=10)*g%10]};return c.replace(k,function(j){return j in r?r[j]:j.slice(1,j.length-1)})}}();
dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};
dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(k,l){return dateFormat(this,k,l)};var saveCallback=function(imgPath){};var jcropAPI=null;
$(function(){$("img.imggal-thumb").lazyload();$("#btn-cancel-crop").hide();var isIE7=$.browser.version.msie&&$.browser.version=="7.0";if(!isIE7)$(window).bind("resize",function(){centerDialog()});$(".modal-dialog").dialog({modal:true,width:800,buttons:{Salvar:function(){var selIndex=$("#tabs").tabs("option","selected");var imgPaths=[];if(selIndex==1){saveCallback([$("#image-url").val()]);return}var listContainer=selIndex==0?"#fsUploadProgress":"#mediagal-list";var arrSelectedItems=$("div.itm-expanded",
listContainer);if(arrSelectedItems.length==0){alert("Voc\u00ea deve escolher pelo menos uma imagem.");return false}arrSelectedItems.each(function(i){if($("span.select-imagegal-item",this).text()=="Selecionado")imgPaths.push($("img",this).attr("src"))});saveCallback(imgPaths)},Cancelar:function(){saveCallback([])}},close:function(event,ui){saveCallback([])},open:function(){}});$("#tabs").tabs();$("#btn-cancel-crop a").click(function(){$("#btn-edit-image").val("Recortar...");clearCropPanel()});$("#btn-edit-image").click(function(){var thisElem=
$(this);if(thisElem.val()=="Recortar..."){thisElem.val("Salvar");$("#image-attributes").hide();$("#image-to-crop").removeClass("uploaded-image-preview");$("#btn-cancel-crop").show();jcropAPI=$.Jcrop("#image-to-crop",{boxWidth:400,boxHeight:250,onSelect:function(c){$("#crop-x-axis").val(c.x);$("#crop-y-axis").val(c.y);$("#crop-width").val(c.w);$("#crop-height").val(c.h)}})}else{thisElem.val("Recortar...");$.ajax({url:cropUrl,data:{xaxis:$("#crop-x-axis").val(),yaxis:$("#crop-y-axis").val(),width:$("#crop-width").val(),
height:$("#crop-height").val(),filename:$("#image-to-crop").attr("src")},dataType:"json",type:"POST",success:function(data,status,xhr){clearCropPanel();var currSrc=$("#image-to-crop").attr("src");$("#image-to-crop").attr("src",currSrc.substring(0,currSrc.indexOf("?ts"))+"?ts="+(new Date).getTime());$("#image-dimensions").text("Dimens\u00f5es: "+$("#crop-width").val()+" x "+$("#crop-height").val())},error:function(){alert("Ocorreu um erro ao recortar a sua imagem.");clearCropPanel()}})}});$("#tabbtn-medialibrary").click(function(){if(galleryFileList.count()>
0)return true;$.ajax({url:mediaGalleryUrl,dataType:"json",success:function(data,textStatus,xhr){if(data==null){alert("Ocorreu uma falha ao obter a lista de arquivos. Por favor, tente novamente mais tarde.");return}var contentPane=$("div.ajax-loader","#mediagal-list").remove();if(data.length==0){contentPane.append("No momento, n\u00e3o h\u00e1 arquivos em sua biblioteca de m\u00eddia.");return}$.each(data,function(index,value){if(Utils.isImageFile(value.fileName)){var newFile=galleryFileList.addFile(value.fileName,
Utils.random.getId(8),value.imagePath);newFile.setCompleted(value)}})},error:function(xhr,textStatus,error){alert("Ocorreu uma falha ao obter a lista de arquivos. Por favor, tente novamente mais tarde.")}})})});function imgSelectedEventListener(_fnCallback){saveCallback=_fnCallback}
function openDialog(_bMultiselect){var multiSelect=typeof _bMultiselect==="boolean"?_bMultiselect:false;uploadFileList.multiSelect=multiSelect;galleryFileList.multiSelect=multiSelect;$("#crop-panel").hide();$("#image-url").val("");$("#image-filename").text("");$("#image-dimensions").text("");$("#image-to-crop").attr("src","");uploadFileList.clear();galleryFileList.clear();$(".modal-dialog").dialog("open");var selIndex=$("#tabs").tabs("option","selected");if(selIndex==2)$("#tabbtn-medialibrary").click();
setTimeout(centerDialog,100)}function centerDialog(){var overlayElem=$(".modal-dialog").dialog("option","height",$(window).height()-50).dialog("widget");overlayElem.css("left",($(window).width()-overlayElem.width())/2).css("top",($(window).height()-overlayElem.height())/2)}function clearCropPanel(){jcropAPI.destroy();$("#image-to-crop").addClass("uploaded-image-preview");$("#btn-cancel-crop").hide();$("#image-attributes").show()};function fileQueued(file){try{uploadFileList.addFile(file.name,file.id)}catch(ex){this.debug(ex)}}
function fileQueueError(file,errorCode,message){try{if(errorCode===SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED){this.debug("Voc\u00ea tentou enviar arquivos demais.\n"+(message===0?"Voc\u00ea atingiu o limite de uploads.":"Voc\u00ea pode selecionar "+(message>1?"at\u00e9 "+message+" arquivos.":"arquivo.")));return}var status="";switch(errorCode){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:status="Arquivo grande demais.";this.debug("Error Code: File too big, File name: "+file.name+", File size: "+
file.size+", Message: "+message);break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:status="Imposs\u00edvel enviar: arquivo vazio.";this.debug("Error Code: Zero byte file, File name: "+file.name+", File size: "+file.size+", Message: "+message);break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:status="Tipo de arquivo inv\u00e1lido.";this.debug("Error Code: Invalid File Type, File name: "+file.name+", File size: "+file.size+", Message: "+message);break;default:if(file!==null)status="Erro desconhecido";
this.debug("Error Code: "+errorCode+", File name: "+file.name+", File size: "+file.size+", Message: "+message);break}uploadFileList.getFile(file.id).setStatus(status)}catch(ex){this.debug(ex)}}function fileDialogComplete(numFilesSelected,numFilesQueued){try{if(numFilesSelected>0)$("#"+this.customSettings.cancelButtonId).attr("disabled","false");this.startUpload()}catch(ex){this.debug(ex)}}
function uploadStart(file){try{uploadFileList.getFile(file.id).setStatus("Enviando...")}catch(ex){this.debug(ex)}return true}function uploadProgress(file,bytesLoaded,bytesTotal){try{var percent=Math.ceil(bytesLoaded/bytesTotal*100);uploadFileList.getFile(file.id).setProgress(percent)}catch(ex){this.debug(ex)}}function uploadSuccess(file,serverData){try{var fileData=JSON.parse(serverData);uploadFileList.getFile(file.id).setCompleted(fileData)}catch(ex){this.debug(ex)}}
function uploadError(file,errorCode,message){try{var status="";switch(errorCode){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:status="Erro HTTP "+message;this.debug("Error Code: HTTP Error, File name: "+file.name+", Message: "+message);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:status="Falha de upload.";this.debug("Error Code: Upload Failed, File name: "+file.name+", File size: "+file.size+", Message: "+message);break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:status="Erro de servidor (IO)";this.debug("Error Code: IO Error, File name: "+
file.name+", Message: "+message);break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:status="Falha de seguran\u00e7a.";this.debug("Error Code: Security Error, File name: "+file.name+", Message: "+message);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:status="Limite de upload excedido.";this.debug("Error Code: Upload Limit Exceeded, File name: "+file.name+", File size: "+file.size+", Message: "+message);break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:status="Falha de valida\u00e7\u00e3o. Arquivo ignorado.";
this.debug("Error Code: File Validation Failed, File name: "+file.name+", File size: "+file.size+", Message: "+message);break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:if(this.getStats().files_queued===0)$("#"+this.customSettings.cancelButtonId).attr("disabled",true);status="Cancelado";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:status="Interrompido";break;default:status="Erro desconhecido: "+errorCode;this.debug("Error Code: "+errorCode+", File name: "+file.name+", File size: "+file.size+", Message: "+
message);break}uploadFileList.getFile(file.id).setErrorState(status)}catch(ex){this.debug(ex)}}function uploadComplete(file){if(this.getStats().files_queued===0)$("#"+this.customSettings.cancelButtonId).attr("disabled","true")}function queueComplete(numFilesUploaded){};function File(_id,_targetContainerId,_fileList){this.id=_id;this.fileElem=$("#"+_id,_targetContainerId);this.selected=false;this.expanded=false;this.ownerList=_fileList;var that=this;this.setProgress=function(_progress){$(".progress-bar",that.fileElem).css("width",_progress+"%")};this.setStatus=function(_status){$("span.progress-text",that.fileElem).text(_status)};this.setErrorState=function(_status){$("span.view-imagegal-item",that.fileElem).hide();$(".progress-bar",that.fileElem).css("width","100%").fadeOut();
$("span.progress-text",that.fileElem).text("Erro de envio - "+_status)};this.setCompleted=function(_fileData){$("span.progress-text",that.fileElem).hide();$(".progress-bar",that.fileElem).css("width","100%").fadeOut();$("img.uploaded-image",that.fileElem).attr("src",_fileData.imagePath+"?ts="+(new Date).getTime()).show();var tmplData={imgPath:_fileData.imagePath,fileName:Utils.getFileName(_fileData.fileName),uploadDate:(new Date).format("dd/mm/yyyy"),dimension:_fileData.width+" x "+_fileData.height,
link:_fileData.linkUrl};var template=$("#imgDetailsTmpl").tmpl(tmplData).appendTo($("div.progress-content",that.fileElem));$("span.view-imagegal-item",this.fileElem).show().toggle(that.expand,that.collapse);$("span.select-imagegal-item",this.fileElem).toggle(that.select,that.unselect);$("div.progress-content",this.fileElem).click(function(){$("span.select-imagegal-item",this).click()})};this.expand=function(_event){if(that.expanded)return true;try{$(this).text("Fechar").next().slideToggle().end();
that.expanded=true}catch(err){console.log(err)}};this.collapse=function(_event){if(!that.expanded)return true;try{var viewElem=_event!==undefined?$(this):$("span.view-imagegal-item",this.fileElem);viewElem.text("Exibir").next().slideToggle().end();that.expanded=false}catch(err){console.log(err)}};this.select=function(_event){if(that.selected)return true;try{var selectElem=_event!==undefined?$(this):$("span.select-imagegal-item",this.fileElem);var container=selectElem.text("Selecionado").parent().parent().parent().parent().addClass("itm-expanded").animate({backgroundColor:"#f8e354"},
1E3);if(!that.ownerList.multiSelect)that.ownerList.closeAllFilesExcept(that.id);that.selected=true}catch(err){console.log(err)}};this.unselect=function(_event){if(!that.selected)return true;try{var selectElem=_event!==undefined?$(this):$("span.select-imagegal-item",this.fileElem);selectElem.text("Selecionar").parent().parent().parent().parent().removeClass("itm-expanded").animate({backgroundColor:"#fff"},1E3);that.selected=false}catch(err){console.log(err)}}};(function(){function FileList(_targetContainerId){this.multiSelect=false;this.targetContainerId="#"+_targetContainerId;var allFiles=[];this.count=function(){return allFiles.length};var that=this;$(this.targetContainerId).append($("<p />",{"class":"right-align underline select-all",id:"btn-select-all",text:"Marcar tudo",click:function(){var thisObj=$(this);if(thisObj.text()=="Marcar tudo"){thisObj.text("Desmarcar tudo");that.selectAll()}else{thisObj.text("Marcar tudo");that.unselectAll()}}}).hide());
this.addFile=function(_fileName,_fileId,_imgPath){$("#galtmpl").tmpl({bareFileName:_fileName,galleryImg:_imgPath||String.empty}).appendTo($(this.targetContainerId)).attr("id",_fileId);var newFile=new File(_fileId,this.targetContainerId,this);allFiles.push(newFile);if(this.multiSelect)$("#btn-select-all",this.targetContainerId).show();return newFile};this.clear=function(){allFiles=[];$("div.mediagal-item",this.targetContainerId).remove();$("#btn-select-all",this.targetContainerId).hide()};this.getFile=
function(_fileId){return JSLINQ(allFiles).First(function(item){return item.id==_fileId})};this.closeAllFilesExcept=function(_fileId){var files=JSLINQ(allFiles).Where(function(item){return item.id!=_fileId}).ToArray();$.each(files,function(i,val){val.collapse();val.unselect()})};this.getAllFiles=function(){return allFiles};this.selectAll=function(){$.each(allFiles,function(i,val){val.select()})};this.unselectAll=function(){$.each(allFiles,function(i,val){val.unselect()})};this.getSelectedFiles=function(){return JSLINQ(allFiles).Where(function(item){return item.selected})}}
window.FileList=FileList})();$(function(){$("#btn-new-field").click(function(e){e.preventDefault();fieldManager.open({callback:onDataAvailable})});$(".btn-edit-field").live("click",function(){var indexKey=$(this).attr("indexkey");var prefix="input[name='Fields["+indexKey+"].";fieldManager.open({callback:onDataAvailable,data:{key:indexKey,displayName:$(prefix+"FieldDisplayName']").val(),dataType:$(prefix+"DataType']").val(),isRequired:$(prefix+"IsRequired']").val().toLowerCase()==="true",showInList:$(prefix+"ShowInListMode']").val().toLowerCase()==
"true",metadata:$(prefix+"Metadata']").val()}})});$(".btn-delete-module-field").live("click",function(){var evtTarget=$(this),indexKey=evtTarget.attr("indexkey"),prefix="input[name='Fields["+indexKey+"].",rowId=$(prefix+"ID']");if(rowId.length==0)evtTarget.parent().parent().remove();else $.ajax({type:"POST",url:deleteFielPath,data:"id="+rowId.val(),dataType:"json",success:function(data,textStatus,xhr){displayFlash(data.msg);if(data.result==0)evtTarget.parent().parent().remove()},error:function(xhr,
textStatus,err){displayFlash("Ocorreu uma falha ao remover o campo.")}})});$("#btn-submit").click(function(){if($("#DisplayName").val()===String.empty){$("#DisplayName").parent().append($("<span class='field-validation-error'>Voc\u00ea deve preencher o nome do m\u00f3dulo.</span>"));return false}});if($("td","#field-list-table").length==0)$("#field-list-table").hide();function onDataAvailable(_data){var indexElem=$("input[name='Fields.index'][value='"+_data.key+"']"),tableCell=null,namePrefix="Fields["+
_data.key+"].",hiddenElem="<input type='hidden' />";if(indexElem.length===0){var data={editImgPath:editImgPath,deleteImgPath:deleteImgPath,fieldName:_data.displayName,key:_data.key,isReadOnly:namePrefix+"IsReadOnly",displayName:{name:namePrefix+"FieldDisplayName",value:_data.displayName},dataType:{name:namePrefix+"DataType",value:_data.dataType},isRequired:{name:namePrefix+"IsRequired",value:_data.isRequired},showInList:{name:namePrefix+"ShowInListMode",value:_data.showInList},metadata:{name:namePrefix+
"Metadata",value:_data.metadata!==null?JSON.stringify(_data.metadata):""}};$("#fieldTemplate").tmpl(data).appendTo("#field-list-table > tbody")}else{var selectorPrefix="input[name='Fields["+_data.key+"].";$(selectorPrefix+"FieldDisplayName']").val(_data.displayName);$(selectorPrefix+"DataType']").val(_data.dataType);$(selectorPrefix+"IsRequired']").val(_data.isRequired);$(selectorPrefix+"Metadata']").val(_data.metadata!==null?JSON.stringify(_data.metadata):"");tableCell=$(selectorPrefix+"ShowInListMode']").val(_data.showInList).parent();
$(":first-child",tableCell).text(_data.displayName)}$("#field-list-table").show()}});(function(window){fieldManager=window.fieldManager={metadataObject:null,fieldEditors:[],open:function(_options){callback=_options.callback||null;$(".field-validation-error",txtDispName.val("").parent()).remove();cbIsRequired.attr("checked",false);cbShowInList.attr("checked",false);if(_options.data!==undefined){currFieldKey=_options.data.key;txtDispName.val(_options.data.displayName);txtDataType.val(_options.data.dataType);cbIsRequired.attr("checked",_options.data.isRequired);cbShowInList.attr("checked",
_options.data.showInList);if(_options.data.metadata!==null&&_options.data.metadata!=="")fieldManager.metadataObject=JSON.parse(_options.data.metadata)}else currFieldKey=fieldCount++;this.updateFieldEditorText();$("#create-field-overlay").dialog("open")},registerFieldEditor:function(_data){this.fieldEditors.push(_data)},getCurrentFieldEditor:function(){var dataType=txtDataType.val();var bFound=false;return JSLINQ(fieldManager.fieldEditors).Last(function(item){$.each(item.fieldType.split(";"),function(i,
val){if(val==dataType){bFound=true;return}});return bFound})},setFieldMetadata:function(_metadata){this.metadataObject=_metadata},getFieldMetadata:function(){var editor=fieldManager.getCurrentFieldEditor();return editor!==null?editor.getData():null},updateFieldEditorText:function(){var editor=fieldManager.getCurrentFieldEditor();if(editor!==null){$("#btn-additional-data").show().text(editor.editorText);editor.clearData()}else $("#btn-additional-data").hide()},openEditor:function(){var editor=fieldManager.getCurrentFieldEditor();
if(editor!==null){if(fieldManager.metadataObject!==null){editor.setData(fieldManager.metadataObject);editor.setData(fieldManager.metadataObject)}editor.open()}}};var txtDispName=null,txtDataType=null,cbIsRequired=null,cbShowInList=null,callback=function(){},fieldCount=0,currFieldKey=-1;$(function(){txtDispName=$("#FieldDisplayName");txtDataType=$("#DataType");cbIsRequired=$("#IsRequired");cbShowInList=$("#ShowInListMode");txtDataType.change(fieldManager.updateFieldEditorText);$("#btn-additional-data").click(function(){fieldManager.openEditor();
return false});$("#create-field-overlay").dialog({autoOpen:false,modal:true,width:400,buttons:{Salvar:function(){if(txtDispName.val()===""){txtDispName.parent().append($("<span class='field-validation-error'></span>").text("Voc\u00ea deve preencher o nome do campo."));return false}callback({key:currFieldKey,displayName:txtDispName.val(),dataType:txtDataType.val(),isRequired:cbIsRequired.attr("checked"),showInList:cbShowInList.attr("checked"),metadata:fieldManager.metadataObject});$(this).dialog("close")},
Cancelar:function(){$(this).dialog("close")}},close:function(){}})})})(window);(function(window){moduleReferenceDialog=window.moduleReferenceDialog={fieldType:"Com.Dover.Web.Models.DataTypes.ModuleReference",editorText:"Selecionar o m\u00f3dulo...",getData:function(){return $("#module-reference-dropdown").val()},setData:function(_metadata){this.clearData();if(_metadata!==null)$("#module-reference-dropdown").val(_metadata);var dropdown=$("#module-reference-dropdown");var formPane=$("#module-reference-form").show();var statusMg=$("#status-msg").hide().text("");function onModulesReceived(data){if(data.status===
1)if(data.modules!==null&&data.modules.length>0)$.each(data.modules,function(index,value){dropdown.append($("<option />",{value:value.id,text:value.moduleName}))});else{formPane.hide();statusMg.show().text("Nenhum m\u00f3dulo encontrado para esta conta.")}else{formPane.hide();statusMg.show().text("Erro obtendo a lista de m\u00f3dulos para esta conta.")}}$.getJSON(getModulesUrl,onModulesReceived)},clearData:function(){$("option",$("#module-reference-dropdown").val("")).remove()},open:function(_metadata){$("#module-reference-dialog").dialog("open")}};
$(function(){$("#module-reference-dialog").dialog({autoOpen:false,modal:true,buttons:{Salvar:function(){$(this).dialog("close")}},close:function(){fieldManager.setFieldMetadata(moduleReferenceDialog.getData())}});fieldManager.registerFieldEditor(moduleReferenceDialog)})})(window);(function(window){validValuesDialog=window.validValuesDialog={fieldType:"Com.Dover.Web.Models.DataTypes.DropdownButton;Com.Dover.Web.Models.DataTypes.CheckBoxList",editorText:"Valores v\u00e1lidos...",getData:function(){var arrValidValues=[];$("span","#valid-values-table").each(function(index){arrValidValues.push($(this).text())});return arrValidValues},setData:function(_metadata){this.clearData();if(_metadata!==null&&_metadata instanceof Array)$.each(_metadata,function(index,value){validValuesDialog.addValidValue(value)})},
clearData:function(){$("#valid-values-table tr[class*=grid-row]").remove();$("#valid-value").val("")},addValidValue:function(_value){var itemValue="<span>"+_value+"</span>",imgCross="<img class='btn-delete-field' title='Apagar' src='"+deleteImgPath+"'/>",rowClass="grid-row";var rowText="<tr class='{rowClass}'><td>{imgCross}</td><td>{itemValue}</td></tr>";rowText=rowText.replace(/{rowClass}/g,rowClass);rowText=rowText.replace(/{imgCross}/g,imgCross);rowText=rowText.replace(/{itemValue}/g,itemValue);
$("#valid-values-table > tbody").append(rowText);$("#valid-value").val("")},open:function(){$("#valid-values-dialog").dialog("open")}};$(function(){$("#valid-values-dialog").dialog({autoOpen:false,modal:true,buttons:{Fechar:function(){$(this).dialog("close")}},close:function(){fieldManager.setFieldMetadata(validValuesDialog.getData())}});$("#btn-add-valid-value").click(function(){validValuesDialog.addValidValue($("#valid-value").val())});$(".btn-delete-field").live("click",function(){$(this).parent().parent().remove()});
fieldManager.registerFieldEditor(validValuesDialog)})})(window);
